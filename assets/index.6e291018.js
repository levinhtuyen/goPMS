var G=Object.defineProperty;var O=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var B=(t,a,o)=>a in t?G(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,Q=(t,a)=>{for(var o in a||(a={}))J.call(a,o)&&B(t,o,a[o]);if(O)for(var o of O(a))H.call(a,o)&&B(t,o,a[o]);return t};import{aE as Z,_ as ee,J as te,r as u,bz as ae,a as oe,w as I,K as le,F as d,G as k,I as _,N as s,P as i,M as r,L as y,U as N,W as U,bq as ie,V as se,aO as b,R as f,Q as S,O as z}from"./index.4bd8ab7e.js";import{Q as re}from"./QInnerLoading.36fa411b.js";import{Q as ne,a as W,c as m,b as de}from"./QTable.87be80e4.js";import{Q as ce}from"./QPagination.952d6437.js";import{a as me,f as ue}from"./useFormat.349e799c.js";import{u as fe}from"./useI18n.96209f4d.js";import{F as ge}from"./filter.e22c1f76.js";import{b as _e,u as we,d as $,c as ke}from"./axiosClient.ad61c203.js";import{Q as ye}from"./queryKeys.832af9fa.js";import{d as g}from"./date.525ad423.js";import"./QList.550b5ccf.js";import"./QSelect.2521a28c.js";import"./QMenu.d60d439b.js";import"./position-engine.e365a736.js";import"./selection.cdf30163.js";import"./QItemLabel.0748896a.js";import"./rtl.4b414a6d.js";import"./QDate.20311372.js";import"./use-cache.b0833c75.js";import"./QPopupProxy.0d4ba934.js";import"./useCategoryServiceQuery.1a080013.js";const be=g.formatDate(new Date,"DD/MM/YYYY"),E=(t=be)=>{const[a,o,n]=t.split("/");return`${n}/${o}/${a}`},De=async t=>{var o,n;const{data:a}=await _e.get(`/inventory/stock/getExportStockList?page=${(n=(o=t.page)==null?void 0:o.value)==null?void 0:n.currentPage}&limit=${t.limit}&displayType=${t.displayType.value.id}&startTime=${t.startTime.value?Number(g.formatDate(E(t.startTime.value),"X")):Number(g.formatDate(E(t.startWeek.value),"X"))}&endTime=${Number(g.formatDate(E(t.endTime.value),"X"))}&keyword=${t.keyword.value?t.keyword.value:""}`);return a},Te=t=>Z([ye.IMPORT_STOCK,{params:t}],()=>De(t));const ve={lass:"full-width","full-height":"",class:"q-mt-md row justify-center"},pe={key:0},xe=["disable"],he={class:"limit-text"},Pe={class:"note"},Qe={class:"row justify-end q-mt-md"},Ie=te({setup(t){const a=g.formatDate,{hasPermission:o}=we(),{t:n}=fe(),D=u({key:"All receipts",id:0}),T=u();let c=u({currentPage:1,lastPage:1}),v=new Date,w=u(a(Date.now(),$)),M=u(a(Date.now(),$)),p=u(a(new Date(v.getFullYear(),v.getMonth(),v.getDate()-7),$));const V=ae(),{data:x,isLoading:h}=Te({page:c,limit:10,keyword:T,startWeek:p,displayType:D,startTime:w.value?w:p,endTime:M}),j=oe(()=>[{name:"no",align:"left",label:n("no"),field:l=>l.sn},{name:"exportDatetime",label:n("export_datetime"),field:l=>l.exportDate},{name:"exportReceiptID",align:"left",label:n("export_receipt_id"),field:l=>l.receiptId},{name:"bookingNo",align:"left",label:n("booking_no"),field:l=>l.bookingNo},{name:"total",label:n("total"),align:"right",field:l=>l.totalPrice},{name:"note",align:"left",label:n("note"),field:l=>l.note},{name:"isDeleted",align:"left",label:"",field:()=>""}]),K=l=>{T.value=l.keywordSearchBookingNo,p.value=l.startWeek,w.value=l.startTime,M.value=l.endTime,D.value=l.valuereceipts};return I(w,()=>{c.value.currentPage=1}),I(T,()=>{c.value.currentPage=1}),I(D,()=>{c.value.currentPage=1}),(l,C)=>{var F,R,Y,q,A,L;const X=le("router-view");return d(),k(U,null,[_("div",null,[s(ge,{"booking-no-field":!0,"is-category":!1,"is-add":!1,onChangeSuccess:K}),s(re,{showing:i(h),label:"Please","label-class":"text-teal","label-style":"font-size:1.1em"},{default:r(()=>[_("div",ve,[s(ie,{color:"negative",thickness:2,size:"2em"})])]),_:1},8,["showing"]),i(h)?N("v-if",!0):(d(),k("div",pe,[(R=(F=i(x))==null?void 0:F.data)!=null&&R.exportStockList?(d(),y(ne,{key:0,loading:i(h),columns:i(j),rows:(q=(Y=i(x))==null?void 0:Y.data)==null?void 0:q.exportStockList,"rows-per-page-options":[0],"no-data-label":"No data","hide-pagination":"","hide-bottom":""},{header:r(e=>[s(W,null,{default:r(()=>[(d(!0),k(U,null,se(e.cols,P=>(d(),y(de,{key:P.name,props:e,class:z(P.label==="Total"?"th-end":"th")},{default:r(()=>[b(f(P.label),1)]),_:2},1032,["props","class"]))),128))]),_:2},1024)]),body:r(e=>[s(W,{props:e},{default:r(()=>[s(m,{key:"no",props:e,class:"td","data-isDeleted":!!e.row.deleteTime},{default:r(()=>[b(f(i(me)(i(c).currentPage,e.pageIndex)),1)]),_:2},1032,["props","data-isDeleted"]),s(m,{key:"exportDatetime",props:e,class:"td","data-isDeleted":!!e.row.deleteTime},{default:r(()=>[b(f(i(g).formatDate(e.row.exportDate*1e3,i(ke))),1)]),_:2},1032,["props","data-isDeleted"]),s(m,{key:"exportReceiptID",props:e,class:"td","data-isDeleted":!!e.row.deleteTime},{default:r(()=>[i(o)("view-export-receipt-detail")?(d(),y(S,{key:0,label:e.row.receiptId,to:{path:`/settings/stock/export/${e.row.sn}`,query:Q({},i(V).query)},flat:"",dense:"",disable:!!e.row.deleteTime,color:e.row.deleteTime?"":"orange-10"},null,8,["label","to","disable","color"])):(d(),k("span",{key:1,disable:!!e.row.deleteTime},f(e.row.receiptId),9,xe))]),_:2},1032,["props","data-isDeleted"]),s(m,{key:"bookingNo",props:e,class:"td","data-isDeleted":!!e.row.deleteTime},{default:r(()=>[s(S,{label:e.row.bookingNo,to:{path:`/booking-details/${e.row.bookingSn}`},target:"_blank",flat:"",dense:"",disable:!!e.row.deleteTime,color:e.row.deleteTime?"":"orange-10"},null,8,["label","to","disable","color"])]),_:2},1032,["props","data-isDeleted"]),s(m,{key:"total",props:e,class:"td-end","data-isDeleted":!!e.row.deleteTime},{default:r(()=>[b(f(i(ue)(e.row.totalPrice))+" VND ",1)]),_:2},1032,["props","data-isDeleted"]),s(m,{key:"note",props:e,class:"td","data-isDeleted":!!e.row.deleteTime},{default:r(()=>[_("div",he,[_("p",Pe,f(e.row.note),1)])]),_:2},1032,["props","data-isDeleted"]),s(m,{key:"isDeleted",props:e,class:"action-detail","data-isDeleted":!!e.row.deleteTime},{default:r(()=>[e.row.deleteTime?(d(),y(S,{key:0,class:z(i(o)("view-export-receipt-detail")===!1?"hidden":""),icon:"visibility",to:{path:`/settings/stock/export/${e.row.sn}`,query:Q({},i(V).query)},dense:"",round:"",flat:""},null,8,["class","to"])):N("v-if",!0)]),_:2},1032,["props","data-isDeleted"])]),_:2},1032,["props"])]),_:1},8,["loading","columns","rows"])):N("v-if",!0),_("div",Qe,[s(ce,{modelValue:i(c).currentPage,"onUpdate:modelValue":C[0]||(C[0]=e=>i(c).currentPage=e),color:"negative",max:((L=(A=i(x))==null?void 0:A.data)==null?void 0:L.meta.lastPage)||1,"max-pages":6,"direction-links":""},null,8,["modelValue","max"])])]))]),s(X)],64)}}});var Je=ee(Ie,[["__scopeId","data-v-21e4ad66"],["__file","D:/project_learn/goPMS/src/modules/stock/export/pages/index.vue"]]);export{Je as default};
