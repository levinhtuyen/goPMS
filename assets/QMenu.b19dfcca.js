var re=Object.defineProperty,ce=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var Q=(e,o,a)=>o in e?re(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,l=(e,o)=>{for(var a in o||(o={}))de.call(o,a)&&Q(e,a,o[a]);if(H)for(var a of H(o))ve.call(o,a)&&Q(e,a,o[a]);return e},y=(e,o)=>ce(e,fe(o));import{c as $,a2 as ge,a3 as he,a4 as me,a5 as ke,u as Pe,d as Te,a6 as Ce,e as ye,r as j,a as r,f as Fe,a7 as Se,j as Oe,a8 as qe,k as Be,a9 as Ee,w as K,aa as xe,ab as W,ac as be,ad as we,ae as Ae,af as Me,b as _,t as De,ag as Re,o as He,g as Qe,ah as je,ai as Ke,aj as We,a0 as _e}from"./index.7efcbe86.js";import{u as Ie,v as I,a as Le,b as Ue,c as $e,d as ze,r as L,s as Ge,p as U}from"./position-engine.4a23d733.js";var Xe=$({name:"QField",inheritAttrs:!1,props:ge,emits:he,setup(){return me(ke())}}),Ye=$({name:"QMenu",inheritAttrs:!1,props:y(l(l(l(l({},Ie),Pe),Te),Ce),{persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:I},self:{type:String,validator:I},offset:{type:Array,validator:Le},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}}),emits:[...ye,"click","escape-key"],setup(e,{slots:o,emit:a,attrs:g}){let c=null,v,f,h;const F=Qe(),{proxy:m}=F,{$q:n}=m,s=j(null),u=j(!1),z=r(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),G=Fe(e,n),{registerTick:J,removeTick:S}=Se(),{registerTimeout:O,removeTimeout:q}=Oe(),{transition:N,transitionStyle:V}=qe(e,u),{localScrollTarget:B,changeScrollEvent:X,unconfigureScrollTarget:Y}=Ue(e,D),{anchorEl:i,canShow:Z}=$e({showing:u}),{hide:E}=Be({showing:u,canShow:Z,handleShow:oe,handleHide:ne,hideOnRouteChange:z,processOnMount:!0}),{showPortal:x,hidePortal:b,renderPortal:p}=Ee(F,s,ue),k={anchorEl:i,innerRef:s,onClickOutside(t){if(e.persistent!==!0&&u.value===!0)return E(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&_e(t),!0}},w=r(()=>U(e.anchor||(e.cover===!0?"center middle":"bottom start"),n.lang.rtl)),ee=r(()=>e.cover===!0?w.value:U(e.self||"top start",n.lang.rtl)),te=r(()=>(e.square===!0?" q-menu--square":"")+(G.value===!0?" q-menu--dark q-dark":"")),ae=r(()=>e.autoClose===!0?{onClick:se}:{}),A=r(()=>u.value===!0&&e.persistent!==!0);K(A,t=>{t===!0?(xe(T),ze(k)):(W(T),L(k))});function P(){je(()=>{let t=s.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function oe(t){if(S(),q(),c=e.noRefocus===!1?document.activeElement:null,be(R),x(),D(),v=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const C=we(t);if(C.left!==void 0){const{top:le,left:ie}=i.value.getBoundingClientRect();v={left:C.left-ie,top:C.top-le}}}f===void 0&&(f=K(()=>n.screen.width+"|"+n.screen.height+"|"+e.self+"|"+e.anchor+"|"+n.lang.rtl,d)),e.noFocus!==!0&&document.activeElement.blur(),J(()=>{d(),e.noFocus!==!0&&P()}),O(()=>{n.platform.is.ios===!0&&(h=e.autoClose,s.value.click()),d(),x(!0),a("show",t)},e.transitionDuration)}function ne(t){S(),q(),b(),M(!0),c!==null&&(t===void 0||t.qClickOutside!==!0)&&(c.focus(),c=null),O(()=>{b(!0),a("hide",t)},e.transitionDuration)}function M(t){v=void 0,f!==void 0&&(f(),f=void 0),(t===!0||u.value===!0)&&(Ae(R),Y(),L(k),W(T)),t!==!0&&(c=null)}function D(){(i.value!==null||e.scrollTarget!==void 0)&&(B.value=Me(i.value,e.scrollTarget),X(B.value,d))}function se(t){h!==!0?(Ke(m,t),a("click",t)):h=!1}function R(t){A.value===!0&&e.noFocus!==!0&&We(s.value,t.target)!==!0&&P()}function T(t){a("escape-key"),E(t)}function d(){const t=s.value;t===null||i.value===null||Ge({el:t,offset:e.offset,anchorEl:i.value,anchorOrigin:w.value,selfOrigin:ee.value,absoluteOffset:v,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ue(){return _(Re,{name:N.value,appear:!0},()=>u.value===!0?_("div",l(y(l({},g),{ref:s,tabindex:-1,class:["q-menu q-position-engine scroll"+te.value,g.class],style:[g.style,V.value]}),ae.value),De(o.default)):null)}return He(M),Object.assign(m,{focus:P,updatePosition:d}),p}});export{Ye as Q,Xe as a};
