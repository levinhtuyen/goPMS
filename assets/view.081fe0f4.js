import{_ as De,J as Re,r as Qe,bz as xe,K as le,F as f,G as Ie,N as t,P as e,M as s,W as Ne,I as d,R as c,Q as ne,L as g,q as v,O as S,aO as k,am as T,U as _,aQ as $,bq as Oe}from"./index.4bd8ab7e.js";import{Q as y,a as h}from"./selection.cdf30163.js";import{Q as $e}from"./QList.550b5ccf.js";import{Q as Te}from"./QMenu.d60d439b.js";import{Q as U,a as P,b as j}from"./QTabPanels.9ec0787d.js";import{Q as Ue}from"./QTabs.2c9a69b7.js";import{Q as Pe}from"./QInnerLoading.36fa411b.js";import{C as V}from"./ClosePopup.34597da2.js";import{s as ie,I as je,S as qe,P as Be}from"./useBookingStatus.f87fdc0e.js";import{u as ze,a as Fe,b as Me,C as Ee,c as Le,d as Ae,e as Ge}from"./useCheckInMutation.1e7656a3.js";import{u as Je}from"./axiosClient.ad61c203.js";import{u as Ke}from"./useI18n.96209f4d.js";import{u as We}from"./use-quasar.fa06306f.js";import{u as He}from"./useNotify.6f32b3a1.js";import"./position-engine.e365a736.js";import"./touch.70a9dd44.js";import"./use-cache.b0833c75.js";import"./QResizeObserver.cca26867.js";import"./rtl.4b414a6d.js";import"./QSelect.2521a28c.js";import"./QItemLabel.0748896a.js";import"./QForm.8a0c543d.js";import"./useCalculateBookingAmountMutation.f3b5a254.js";import"./queryKeys.832af9fa.js";import"./useFormat.349e799c.js";import"./QDate.20311372.js";import"./QPopupProxy.0d4ba934.js";import"./date.525ad423.js";import"./useAppendixQuery.627eefb9.js";import"./QSpace.196a214e.js";import"./QBar.f39aa7c3.js";import"./useValidate.94ac08ef.js";import"./QTable.87be80e4.js";import"./QTooltip.a00a2acf.js";import"./QToolbarTitle.dfdc5985.js";import"./QToolbar.06ebec8c.js";import"./const.327e9cc0.js";import"./QTime.12b67e2f.js";import"./TouchPan.3d5b23e3.js";import"./useCreateDate.f74931c4.js";const Xe={class:"row justify-between items-center",style:{height:"100%"}},Ye={class:"text-bold",style:{"font-size":"20px"}},Ze={class:"row items-center"},eo={style:{"font-size":"20px"}},oo={class:"text-bold"},ao={class:"row justify-center q-mb-md"},to={class:"flex justify-end text-body1 q-mt-md text-grey-6"},so={lass:"full-width full-height q-mt-md row justify-center"},lo=Re({setup(no){let l=Qe();const q=xe();q.params.tab?l.value=q.params.tab:l.value="roomInformation";const{notifyUpdateSuccess:re}=He(),me=ze(),ue=We(),{t:i}=Ke(),{hasPermission:b}=Je(),ce=p=>{ue.dialog({message:i("check_in_room_view"),cancel:{color:"grey-8",label:i("cancel"),noCaps:!0,dense:!0,outline:!0},color:"negative",ok:{color:"negative",label:i("confirm"),noCaps:!0,dense:!0}}).onOk(()=>{me.mutate({bookingSn:p?String(p):""},{onSuccess:a=>{a&&(re(),B.value())}})})},{isDisplayEarlyCheckIn:de,formPayment:fe,formRoomInfo:o,serviceInfo:pe,refetchBookingDetails:B,bookingDetailsFetching:ge}=Fe(),{ui:u,cancelReservationDialogRef:ke,changeStayDateDialogRef:be,changeRoomDialogRef:ve,checkOutDialogRef:Se,openChangeStayDate:_e,openCancelReservationDialog:ye,openChangeRoomDialog:he,openCheckOutDialog:Ve}=Me(),O=p=>{switch(B.value(),p){case"cancelReservation":u.cancelReservationVisible=!1;break;case"changeStayDate":u.changeStayDateVisible=!1;break;case"changeRoom":u.changeRoomVisible=!1;break;case"checkOut":u.checkOutDialogVisible=!1;break}};return(p,a)=>{const we=le("router-link"),Ce=le("pms-sections");return f(),Ie(Ne,null,[t(Ee,{ref_key:"changeRoomDialogRef",ref:ve,modelValue:e(u).changeRoomVisible,"onUpdate:modelValue":a[0]||(a[0]=r=>e(u).changeRoomVisible=r),onChangeSuccess:a[1]||(a[1]=r=>O("changeRoom"))},null,8,["modelValue"]),t(Le,{ref_key:"cancelReservationDialogRef",ref:ke,modelValue:e(u).cancelReservationVisible,"onUpdate:modelValue":a[2]||(a[2]=r=>e(u).cancelReservationVisible=r),onCancelSuccess:a[3]||(a[3]=r=>O("cancelReservation"))},null,8,["modelValue"]),t(Ae,{ref_key:"checkOutDialogRef",ref:Se,modelValue:e(u).checkOutDialogVisible,"onUpdate:modelValue":a[4]||(a[4]=r=>e(u).checkOutDialogVisible=r),onCheckOutSuccess:a[5]||(a[5]=r=>O("checkOut"))},null,8,["modelValue"]),t(Ge,{ref_key:"changeStayDateDialogRef",ref:be,modelValue:e(u).changeStayDateVisible,"onUpdate:modelValue":a[6]||(a[6]=r=>e(u).changeStayDateVisible=r),onChangeSuccess:a[7]||(a[7]=r=>O("changeStayDate"))},null,8,["modelValue"]),t(Ce,{title:e(i)("booking_detail"),class:"relative-position",style:{"min-height":"calc(100vh - 265px)"}},{default:s(()=>{var r,z,F,M,E,L,A;return[d("div",Xe,[d("p",Ye,c((r=e(o))==null?void 0:r.roomTypeCode)+" - "+c((z=e(o))==null?void 0:z.roomName),1),d("div",Ze,[d("p",eo,"#"+c((F=e(o))==null?void 0:F.bookingNo),1),t(ne,{class:"q-mx-lg","no-caps":"",unelevated:"",color:(E=e(ie)((M=e(o))==null?void 0:M.bookingStatusSn))==null?void 0:E.color},{default:s(()=>{var n,w;return[d("p",oo,c((w=e(ie)((n=e(o))==null?void 0:n.bookingStatusSn))==null?void 0:w.typeName),1)]}),_:1},8,["color"]),((L=e(o))==null?void 0:L.bookingStatusSn)!==3&&((A=e(o))==null?void 0:A.bookingStatusSn)!==6?(f(),g(ne,{key:0,class:"bg-grey-1",icon:"more_vert",flat:""},{default:s(()=>[t(Te,{"transition-show":"jump-down","transition-hide":"jump-up"},{default:s(()=>[t($e,{style:{"min-width":"200px"}},{default:s(()=>{var n,w,G,J,K,W,H,X,Y,Z,ee,oe,ae,te;return[v((f(),g(y,{class:S(e(b)("edit-booking-detail")==!1?"hidden":""),clickable:""},{default:s(()=>[t(h,{class:"row",onClick:a[8]||(a[8]=C=>p.$router.push({name:"BookingEdit",params:{sn:p.$route.params.sn}}))},{default:s(()=>[k(c(e(i)("edit_booking")),1)]),_:1})]),_:1},8,["class"])),[[V]]),t(T),((n=e(o))==null?void 0:n.bookingStatusSn)===2||((w=e(o))==null?void 0:w.bookingStatusSn)===5?v((f(),g(y,{key:0,class:S(e(b)("check-out")==!1?"hidden":""),clickable:"",onClick:a[9]||(a[9]=C=>{var m;return e(Ve)((m=e(o))==null?void 0:m.sn)})},{default:s(()=>[t(h,{class:"row"},{default:s(()=>[k(c(e(i)("check_out")),1)]),_:1})]),_:1},8,["class"])),[[V]]):_("v-if",!0),((G=e(o))==null?void 0:G.bookingStatusSn)===4||((J=e(o))==null?void 0:J.bookingStatusSn)===1?v((f(),g(y,{key:1,class:S(e(b)("check-in")==!1?"hidden":""),clickable:"",onClick:a[10]||(a[10]=C=>{var m;return ce((m=e(o))==null?void 0:m.sn)})},{default:s(()=>[t(h,{class:"row"},{default:s(()=>[k(c(e(i)("check_in")),1)]),_:1})]),_:1},8,["class"])),[[V]]):_("v-if",!0),((K=e(o))==null?void 0:K.bookingStatusSn)===1||((W=e(o))==null?void 0:W.bookingStatusSn)===4||((H=e(o))==null?void 0:H.bookingStatusSn)===2||((X=e(o))==null?void 0:X.bookingStatusSn)===5?v((f(),g(y,{key:2,class:S(e(b)("change-stay-date")==!1?"hidden":""),clickable:"",onClick:a[11]||(a[11]=C=>{var m,D,R,Q,x,I,N,se;return e(_e)((m=e(o))==null?void 0:m.sn,`${(D=e(o))==null?void 0:D.roomTypeCode} - ${(R=e(o))==null?void 0:R.roomName}`,(x=(Q=e(o))==null?void 0:Q.guest[0])==null?void 0:x.fullName,Number((I=e(o))==null?void 0:I.checkIn),Number((N=e(o))==null?void 0:N.checkOut),(se=e(o))==null?void 0:se.roomStatusSn)})},{default:s(()=>[t(h,{class:"row"},{default:s(()=>[k(c(e(i)("change_stay_date")),1)]),_:1})]),_:1},8,["class"])),[[V]]):_("v-if",!0),((Y=e(o))==null?void 0:Y.bookingStatusSn)===1||((Z=e(o))==null?void 0:Z.bookingStatusSn)===4||((ee=e(o))==null?void 0:ee.bookingStatusSn)===2||((oe=e(o))==null?void 0:oe.bookingStatusSn)===5?v((f(),g(y,{key:3,class:S(e(b)("change-room")==!1?"hidden":""),clickable:"",onClick:a[12]||(a[12]=C=>{var m,D,R,Q,x,I,N;return e(he)((m=e(o))==null?void 0:m.roomSn,`${(D=e(o))==null?void 0:D.roomTypeCode} - ${(R=e(o))==null?void 0:R.roomName}`,(x=(Q=e(o))==null?void 0:Q.guest[0])==null?void 0:x.fullName,(I=e(o))==null?void 0:I.sn,(N=e(o))==null?void 0:N.roomTypeSn)})},{default:s(()=>[t(h,{class:"row"},{default:s(()=>[k(c(e(i)("change_room")),1)]),_:1})]),_:1},8,["class"])),[[V]]):_("v-if",!0),t(T),((ae=e(o))==null?void 0:ae.bookingStatusSn)===1||((te=e(o))==null?void 0:te.bookingStatusSn)===4?v((f(),g(y,{key:4,class:S(e(b)("cancel-booking")==!1?"hidden":""),clickable:"",onClick:a[13]||(a[13]=C=>{var m;return e(ye)((m=e(o))==null?void 0:m.sn)})},{default:s(()=>[t(h,{class:"row"},{default:s(()=>[k(c(e(i)("cancel_booking")),1)]),_:1})]),_:1},8,["class"])),[[V]]):_("v-if",!0)]}),_:1})]),_:1})]),_:1})):_("v-if",!0)])]),t(T,{class:"q-my-md"}),d("div",ao,[t(Ue,{modelValue:e(l),"onUpdate:modelValue":a[14]||(a[14]=n=>$(l)?l.value=n:l=n),dense:"","active-color":"white",align:"justify","indicator-color":"transparent",class:"box-shadow-tabs col-lg-5 col-md-8 col-xs-12 row","active-bg-color":"negative"},{default:s(()=>[t(U,{name:"roomInformation",class:"col custom-tab",label:e(i)("room_information"),"no-caps":""},null,8,["label"]),t(U,{name:"services",class:"col custom-tab",label:e(i)("services"),"no-caps":""},null,8,["label"]),t(U,{name:"payment",class:"col custom-tab",label:e(i)("payment"),"no-caps":""},null,8,["label"])]),_:1},8,["modelValue"])]),d("div",null,[t(j,{modelValue:e(l),"onUpdate:modelValue":a[15]||(a[15]=n=>$(l)?l.value=n:l=n),class:"overflow-auto"},{default:s(()=>[t(P,{name:"roomInformation"},{default:s(()=>[t(je,{data:e(o),page:"details"},null,8,["data"])]),_:1})]),_:1},8,["modelValue"]),t(j,{modelValue:e(l),"onUpdate:modelValue":a[16]||(a[16]=n=>$(l)?l.value=n:l=n),class:"overflow-auto"},{default:s(()=>[t(P,{name:"services"},{default:s(()=>[t(qe,{data:e(pe),"room-info":e(o),page:"services"},null,8,["data","room-info"])]),_:1})]),_:1},8,["modelValue"]),t(j,{modelValue:e(l),"onUpdate:modelValue":a[17]||(a[17]=n=>$(l)?l.value=n:l=n),class:"overflow-auto"},{default:s(()=>[t(P,{name:"payment"},{default:s(()=>[t(Be,{"form-room-info":e(o),data:e(fe),page:"details","is-display-early-check-in":e(de)},null,8,["form-room-info","data","is-display-early-check-in"])]),_:1})]),_:1},8,["modelValue"]),d("div",to,[t(we,{style:{"text-decoration":"none"},class:"custom-link",to:{name:"RoomView"}},{default:s(()=>[k(c(e(i)("back_to_room_view_mode")),1)]),_:1})])]),t(Pe,{showing:e(ge)},{default:s(()=>[d("div",so,[t(Oe,{color:"negative",thickness:2,size:"2em"})])]),_:1},8,["showing"])]}),_:1},8,["title"])],64)}}});var Ko=De(lo,[["__scopeId","data-v-ef5987c6"],["__file","D:/project_learn/goPMS/src/modules/booking/booking-details/view.vue"]]);export{Ko as default};
