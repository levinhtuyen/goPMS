import{Q as k}from"./QDate.804040fd.js";import{Q as R}from"./QPopupProxy.9996c4ad.js";import{av as N,_ as F,r as b,C as x,a as D,K as T,F as h,L as Q,M as o,I as s,R as r,N as a,T as I,bo as E,G as V,aF as u,U as A}from"./index.7efcbe86.js";import{a as P}from"./QMenu.b19dfcca.js";import{Q as M}from"./QInnerLoading.5fef3982.js";import{a as U,c,Q as q}from"./QTable.4cc8e1c9.js";import{Q as O}from"./QPagination.a48c1bef.js";import{u as S}from"./useI18n.6b7b36de.js";import{b as C,e as v,d as B,c as X}from"./axiosClient.a0ee23b9.js";import{Q as L}from"./queryKeys.832af9fa.js";import{a as K,f as j}from"./useFormat.349e799c.js";import{n as z}from"./useCreateDate.6141d343.js";import{d}from"./date.2d51ed98.js";import"./use-cache.b0833c75.js";import"./position-engine.4a23d733.js";import"./selection.6afffe69.js";import"./QList.e5651779.js";import"./QSelect.8edab530.js";import"./QItemLabel.938a9258.js";import"./rtl.4b414a6d.js";const Y=async({queryKey:i})=>{const[,n]=i;if((n==null?void 0:n.dateFrom)&&(n==null?void 0:n.dateTo)){const{data:l}=await C.get("/report/getServiceDeletionReportList",{params:n});return l.data}},G=(i,n)=>{const l=[L.SERVICES_DELETION_REPORT,i];return N(l,Y,{enabled:n,select:e=>e})};const H={setup(){const{t:i}=S(),n=b(Date.now()),l=x({page:1,limit:10,dateFrom:Number(d.formatDate(n.value,"X")),dateTo:Number(d.formatDate(n.value,"X"))}),{data:e,isFetching:y}=G(l,!0),f=b(null),g=b(0),p=()=>{f==null||f.value.show()},_=D({get:()=>({from:l.dateFrom?d.formatDate(new Date(l.dateFrom*1e3),v):"",to:l.dateTo?d.formatDate(new Date(l.dateTo*1e3),v):""}),set:m=>{g.value=0,m?(l.dateFrom=Number(d.formatDate(new Date(m.from),"X"))||Number(d.formatDate(new Date(m),"X")),l.dateTo=Number(d.formatDate(new Date(m.to),"X"))||Number(d.formatDate(new Date(m),"X"))):l.dateFrom=l.dateTo=null,t()}}),w=D(()=>[{name:"no",label:i("no"),align:"left",field:""},{name:"deleteTime",label:i("deleted_at_by"),align:"left",field:"deleteTime"},{name:"productName",align:"left",label:i("products"),field:"productName"},{name:"quantity",align:"left",label:i("quantity_deleted"),field:"quantity"},{name:"totalPrice",align:"right",label:i("total_prices"),field:"totalPrice"},{name:"bookingNo",align:"left",label:i("booking_no"),field:"bookingNo"},{name:"room",align:"left",label:i("rooms"),field:"room"},{name:"deleteReason",align:"left",label:i("reason"),field:"deleteReason"}]),t=()=>{l.page=1};return{t:i,columns:w,data:e,isFetching:y,formatIndexTable:K,dateRangeType:g,onOpenDatePopUp:p,qDateRef:f,dateRange:_,formValues:l,FORMAT_DATE_UI:B,FORMAT_DATE_TIME_UI:X,FORMAT_DATE_PICKER:v,newDateStamp:z,date:d,formatMoney:j}}},J={class:"row q-mb-md"},W={class:"text-h5 text-bold"},Z={class:"row q-mb-md"},$={class:"self-center full-width no-outline",tabindex:"0"},ee={class:"relative-position"},te={lass:"full-width","full-height":"",class:"q-mt-md row justify-center"},oe={key:0},ae={class:"slice-tooltip"},ne=["data-title"],le={class:"slice-tooltip",style:{"-webkit-line-clamp":"2"}},ie=["data-title"],se={class:"q-mt-md row justify-end"};function re(i,n,l,e,y,f){const g=T("router-link"),p=T("pms-sections");return h(),Q(p,null,{header:o(()=>[s("div",J,[s("div",W,r(e.t("services_deletion_report")),1)]),s("div",Z,[s("div",null,[a(P,{placeholder:"Select date time",dense:"","stack-label":"",filled:"",onFocus:e.onOpenDatePopUp},{control:o(()=>[s("div",$,r(e.date.formatDate(e.dateRange.from||"",e.FORMAT_DATE_UI))+" - "+r(e.date.formatDate(e.dateRange.to||"",e.FORMAT_DATE_UI)),1)]),prepend:o(()=>[a(I,{name:"event",class:"no-pointer-events"},{default:o(()=>[a(R,{ref:"qDateRef","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[a(k,{modelValue:e.dateRange,"onUpdate:modelValue":n[0]||(n[0]=_=>e.dateRange=_),range:""},null,8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["onFocus"])])])]),default:o(()=>{var _,w;return[s("div",ee,[a(M,{showing:e.isFetching,label:"Please","label-class":"text-teal","label-style":"font-size:1.1em"},{default:o(()=>[s("div",te,[a(E,{color:"negative",thickness:2,size:"2em"})])]),_:1},8,["showing"]),e.isFetching?A("v-if",!0):(h(),V("div",oe,[a(q,{"rows-per-page-options":[0],rows:(_=e.data)==null?void 0:_.serviceDeletionReportList,columns:e.columns,"hide-pagination":"","hide-bottom":"","row-key":"no"},{body:o(t=>[a(U,{props:t},{default:o(()=>[a(c,{key:"no",props:t},{default:o(()=>[u(r(e.formatIndexTable(e.formValues.page,t.rowIndex)),1)]),_:2},1032,["props"]),a(c,{key:"deleteTime",props:t},{default:o(()=>[s("div",null,r(e.newDateStamp(t.row.deleteTime,e.FORMAT_DATE_TIME_UI)),1),s("div",null,r(t.row.deleteByName),1)]),_:2},1032,["props"]),a(c,{key:"productName",props:t},{default:o(()=>[u(r(t.row.productName),1)]),_:2},1032,["props"]),a(c,{key:"quantity",props:t},{default:o(()=>[u(r(t.row.quantity),1)]),_:2},1032,["props"]),a(c,{key:"totalPrice",props:t},{default:o(()=>[u(r(e.formatMoney(t.row.totalPrice))+" VND ",1)]),_:2},1032,["props"]),a(c,{key:"bookingNo",props:t},{default:o(()=>{var m;return[a(g,{style:{"text-decoration":"none"},class:"custom-link text-negative",to:{name:"BookingDetails",params:{sn:(m=t.row)==null?void 0:m.bookingSn}}},{default:o(()=>[u(r(t.row.bookingNo),1)]),_:2},1032,["to"])]}),_:2},1032,["props"]),a(c,{key:"room",props:t,class:"unset-white-space"},{default:o(()=>[s("div",ae,[s("div",{"data-title":t.row.room},r(t.row.room),9,ne)])]),_:2},1032,["props"]),a(c,{key:"deleteReason",props:t,class:"unset-white-space"},{default:o(()=>[s("div",le,[s("div",{"data-title":t.row.deleteReason},r(t.row.deleteReason),9,ie)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),s("div",se,[a(O,{modelValue:e.formValues.page,"onUpdate:modelValue":n[1]||(n[1]=t=>e.formValues.page=t),color:"negative",max:((w=e.data)==null?void 0:w.meta.lastPage)||1,"max-pages":5,"boundary-numbers":"","direction-links":"",push:""},null,8,["modelValue","max"])])]))])]}),_:1})}var Qe=F(H,[["render",re],["__scopeId","data-v-759ba4f6"],["__file","D:/gopms-web/src/modules/report/services-deletion-report/view.vue"]]);export{Qe as default};
