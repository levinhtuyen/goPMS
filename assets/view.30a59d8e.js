import{a as B,Q as Y,b as $,c as j}from"./QTable.4cc8e1c9.js";import{_ as L,J as O,as as S,a as z,F as l,L as R,P as o,av as K,r as w,w as U,p as W,K as A,G as d,N as u,M as _,W as V,I as e,R as a,O as k,V as F,aJ as J,aK as G,aF as X,U as q}from"./index.7efcbe86.js";import{f as C}from"./useFormat.349e799c.js";import{u as Z}from"./useI18n.6b7b36de.js";import{A as H}from"./vue3-apexcharts.common.f8b582d4.js";import{b as ee}from"./axiosClient.a0ee23b9.js";import{Q as te}from"./queryKeys.832af9fa.js";import{R as se}from"./ReservationDialog.a5c646a6.js";import"./QList.e5651779.js";import"./QSelect.8edab530.js";import"./QMenu.b19dfcca.js";import"./position-engine.4a23d733.js";import"./selection.6afffe69.js";import"./QItemLabel.938a9258.js";import"./rtl.4b414a6d.js";import"./QSpace.c00d4884.js";import"./QBar.49f2f7c7.js";import"./QDate.804040fd.js";import"./use-cache.b0833c75.js";import"./QPopupProxy.9996c4ad.js";import"./date.2d51ed98.js";import"./QTime.fadff47c.js";import"./TouchPan.87d2034a.js";import"./touch.70a9dd44.js";import"./QForm.df816fa6.js";import"./ClosePopup.145acd40.js";import"./useNotify.967ca7e7.js";import"./use-quasar.f3f15168.js";import"./useCreateDate.6141d343.js";import"./useValidate.96008b94.js";import"./useAppendixQuery.039c05de.js";import"./useRoomTypeListQuery.ac5115e9.js";import"./useCalculateBookingAmountMutation.46b5c200.js";const oe=O({props:{data:{type:Number,required:!1},chartColor:{type:String,required:!0}},setup(m){const i=m,f=S(i).data,n=S(i).chartColor,D=z(()=>[(f==null?void 0:f.value)||0]),b={chart:{type:"radialBar"},colors:[n.value],plotOptions:{radialBar:{offsetX:0,offsetY:-20,hollow:{margin:5,size:"50%",background:"transparent"},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:"Open-san",fontWeight:600,color:void 0,offsetY:-10},value:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(y){return y+"%"}}}}},labels:[""]};return(y,P)=>(l(),R(o(H),{type:"radialBar",options:b,series:o(D),width:"150",height:"150"},null,8,["series"]))}});var M=L(oe,[["__file","D:/gopms-web/src/modules/dashboard/components/PieChart.vue"]]);const ae=async()=>{const{data:m}=await ee.get("/dashboard/getDashboardData");return m.data},ne=()=>K([te.ME],()=>ae());const x=m=>(J("data-v-5d4627e1"),m=m(),G(),m),re={class:"q-mx-40"},le={class:"text-bold q-mb-md q-mt-none"},ie={class:"row",style:{"justify-content":"center"}},ce=x(()=>e("span",{class:"checked-in-box-border box-border float-left"},null,-1)),de={class:"q-py-md q-pl-md float-right full-width"},me={class:"inline-block float-left"},ue={class:"text-h4 text-bold"},_e={class:"text-h4 text-bold q-mr-sm",style:{color:"#3e3c7b"}},pe={class:"text-h5 text-bold"},he={class:"inline-block float-right"},fe={class:"text-bold text-subtitle1 text-center q-mb-none"},be={class:"chart"},ve={class:"col-md-6 col-xs-12 dashboard-box shadow-11"},xe=x(()=>e("span",{class:"revenue-box-border box-border float-left"},null,-1)),ge={class:"q-py-md q-pl-md float-right full-width"},we={class:"inline-block float-left"},ye={class:"text-h4 text-bold"},ke={class:"text-h4 text-bold q-mr-sm",style:{color:"#3e3c7b"}},qe=x(()=>e("span",{class:"text-h5 text-bold"},"VND",-1)),Ce={class:"inline-block float-right"},De={class:"text-bold text-subtitle1 text-center q-mb-none"},Pe={class:"chart"},Ve={class:"q-mx-40"},Re={class:"text-bold q-mb-md q-mt-none"},Ne={class:"flex q-mb-md"},Ie={class:"flex q-mr-lg"},Qe=x(()=>e("span",{class:"box default-price"},null,-1)),Be={class:"text-bold q-ml-xs text-subtitle1"},Se={class:"flex"},Fe=x(()=>e("span",{class:"box suggested-price"},null,-1)),Me={class:"text-bold q-ml-xs text-subtitle1"},Le={key:0,class:"row custom-cell full-width q-ma-sm"},Oe=["onClick"],Te=["onClick"],Ee={key:0,class:"price suggested-price"},Ye={key:1,class:"price suggested-price"},$e={key:0,class:"col-md-4 col-sm-4"},je=x(()=>e("p",{class:"percent"},null,-1)),ze={key:0},Ke={class:"material-icons"},Ue={key:1,class:"q-mb-none text-bold"},We=O({setup(m){const{t:i}=Z(),f=w(null),{data:n,isFetching:D}=ne(),b=w(!1),y={name:"name",label:"room_type_name",field:"name",align:"left",style:"width: 500px"},P=w([]),N=w([]);U(D,c=>{var t,s,h,g;const r=w([]);(t=n==null?void 0:n.value)!=null&&t.suggestedPrice[0]&&(r.value=Object.keys(n.value.suggestedPrice[0]).filter(v=>v!=="name"&&v!=="sn"));const p=((s=r==null?void 0:r.value)==null?void 0:s.map(v=>({name:v,label:v,field:v,align:"center",style:"min-width: 200px"})))||[];c===!1&&(P.value=[y,...p]),N.value=((h=n.value)==null?void 0:h.suggestedPrice)||[],I(Number((g=n==null?void 0:n.value)==null?void 0:g.now)*1e3||Date.now())});const T=c=>c===1?"arrow_drop_down":c===2?"arrow_drop_up":c===0?"remove":"";W(()=>{I(Date.now())});const I=c=>{const r=new Date(c),t=(60-r.getMinutes())*60*1e3-r.getSeconds();setInterval(()=>{location.reload()},t)},Q=(c,r,p)=>{var s;const t=p.split("hours").join("");b.value=!0,(s=f.value)==null||s.setupReservationDialog(r,null,t,c)},E=()=>{b.value=!1};return(c,r)=>{const p=A("pms-sections");return l(),d(V,null,[u(p,null,{default:_(()=>{var t,s,h,g;return[e("div",re,[e("h4",le,a(o(i)("dashboard")),1),e("div",ie,[e("div",{class:k(["col-md-6 col-xs-12 dashboard-box shadow-11",c.$q.screen.gt.md?"q-mr-xl":"q-mb-md"])},[ce,e("div",de,[e("div",me,[e("p",ue,a(o(i)("dashboard_checked_in")),1),e("p",null,[e("span",_e,a((t=o(n))==null?void 0:t.totalCheckedInBooking),1),e("span",pe,a(o(i)("booking(s)")),1)])]),e("div",he,[e("p",fe,a(o(i)("occupancy")),1),e("div",be,[u(M,{data:(s=o(n))==null?void 0:s.occupancy,"chart-color":"#6445CE"},null,8,["data"])])])])],2),e("div",ve,[xe,e("div",ge,[e("div",we,[e("p",ye,a(o(i)("revenue")),1),e("p",null,[e("span",ke,a(o(C)((h=o(n))==null?void 0:h.revenue)),1),qe])]),e("div",Ce,[e("p",De,a(o(i)("efficiency")),1),e("div",Pe,[u(M,{data:(g=o(n))==null?void 0:g.efficiency,"chart-color":"#D84D9C"},null,8,["data"])])])])])])])]}),_:1}),u(p,null,{default:_(()=>[e("div",Ve,[e("h4",Re,a(o(i)("suggested_price")),1),e("div",Ne,[e("p",Ie,[Qe,e("span",Be,a(o(i)("default_price")),1)]),e("p",Se,[Fe,e("span",Me,a(o(i)("suggested_price")),1)])]),u(Y,{class:"sticky-table",rows:N.value,columns:P.value,"row-key":"name","hide-pagination":"","hide-bottom":"","table-colspan":9,dense:"","rows-per-page-options":[0],separator:"cell"},{header:_(t=>[u(B,{props:t},{default:_(()=>[(l(!0),d(V,null,F(t.cols,s=>(l(),R($,{key:s.name,props:t},{default:_(()=>[X(a(o(i)(s.label)),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:_(t=>[u(B,null,{default:_(()=>[(l(!0),d(V,null,F(t.cols,s=>(l(),R(j,{key:s.name,props:t,class:"q-px-none"},{default:_(()=>[typeof t.row[s.name]=="object"?(l(),d("div",Le,[e("div",{class:k(t.row[s.name].suggestedPrice?"col-md-8 col-sm-8":"col-md-12")},[t.row[s.name].defaultPrice?(l(),d("div",{key:0,class:"q-mb-sm cursor-pointer",onClick:h=>Q(0,t.row.sn,s.name)},[e("p",{class:k(["price default-price",t.row[s.name].suggestedPrice?"":"q-mb-none"])},a(o(C)(t.row[s.name].defaultPrice))+" VND ",3)],8,Oe)):q("v-if",!0),typeof t.row[s.name].statusPercent!==null&&t.row[s.name].suggestedPrice?(l(),d("div",{key:1,class:"q-mb-none cursor-pointer",onClick:h=>Q(1,t.row.sn,s.name)},[t.row[s.name].statusPercent!==0?(l(),d("span",Ee,a(o(C)(t.row[s.name].suggestedPrice))+" VND ",1)):(l(),d("span",Ye,a(o(C)(t.row[s.name].defaultPrice))+" VND ",1))],8,Te)):q("v-if",!0)],2),typeof t.row[s.name].statusPercent!==null&&t.row[s.name].suggestedPrice?(l(),d("div",$e,[je,e("p",{class:k(["q-mb-none q-ml-xs percent flex",t.row[s.name].statusPercent===1?"text-red":"text-blue"])},[t.row[s.name].percent?(l(),d("span",ze,a(t.row[s.name].percent)+"% ",1)):q("v-if",!0),e("span",Ke,a(T(t.row[s.name].statusPercent)),1)],2)])):q("v-if",!0)])):(l(),d("p",Ue,a(t.row[s.name]),1))]),_:2},1032,["props"]))),128))]),_:2},1024)]),_:1},8,["rows","columns"])])]),_:1}),u(se,{ref_key:"reservationDialogRef",ref:f,modelValue:b.value,"onUpdate:modelValue":r[0]||(r[0]=t=>b.value=t),onCreateSuccess:r[1]||(r[1]=t=>E())},null,8,["modelValue"])],64)}}});var Pt=L(We,[["__scopeId","data-v-5d4627e1"],["__file","D:/gopms-web/src/modules/dashboard/view.vue"]]);export{Pt as default};
