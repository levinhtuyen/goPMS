import{Q as F}from"./QDate.20311372.js";import{Q as A}from"./QPopupProxy.0d4ba934.js";import{aE as q,_ as H,J as O,r as b,a as R,C as U,K as L,F as m,L as v,M as t,I as e,R as i,P as o,N as l,G as D,U as w,T as M,aQ as X,bq as W,W as K,V as z,aO as x}from"./index.4bd8ab7e.js";import{a as Y}from"./QMenu.d60d439b.js";import{Q as G}from"./QInnerLoading.36fa411b.js";import{Q as J,a as S,c as n,b as Z}from"./QTable.87be80e4.js";import{Q as $}from"./QTooltip.a00a2acf.js";import{Q as ee}from"./QPagination.952d6437.js";import{d}from"./date.525ad423.js";import{b as te,e as N,d as B,c as C}from"./axiosClient.ad61c203.js";import{Q as ae}from"./queryKeys.832af9fa.js";import{n as I}from"./useCreateDate.f74931c4.js";import{u as se}from"./useI18n.96209f4d.js";import"./use-cache.b0833c75.js";import"./position-engine.e365a736.js";import"./selection.cdf30163.js";import"./QList.550b5ccf.js";import"./QSelect.2521a28c.js";import"./QItemLabel.0748896a.js";import"./rtl.4b414a6d.js";const le=async({queryKey:h})=>{const[,a]=h;if((a==null?void 0:a.startDate)&&(a==null?void 0:a.endDate)){const{data:c}=await te.get("/report/getShiftHandoverList",{params:a});return c.data}},oe=(h,a)=>{const c=[ae.SHIFT_HANDOVER_REPORT,h];return q(c,le,{enabled:a,select:y=>y})};const ie={class:"row q-mb-md"},ne={class:"text-h5 text-bold"},re={class:"row q-mb-md"},de={key:0,class:"self-center full-width no-outline",tabindex:"0"},ce={class:"relative-position"},fe={lass:"full-width","full-height":"",class:"q-mt-md row justify-center"},me={key:0},_e={class:"row items-left justify-left"},he={class:"row items-left justify-left"},ue={class:"row items-left justify-left"},ge={class:"row items-left justify-left"},ve={class:"row items-left justify-left"},we={class:"text-right"},ye={class:"text-right"},pe={class:"text-right"},be={class:"text-right"},De={class:"text-right"},xe={class:"text-right"},Te={class:"text-right"},ke={class:"text-right"},Qe={class:"row items-left justify-left"},Re={class:"limit-text"},Se={class:"row justify-end q-mt-md"},Ne=O({setup(h){const{t:a}=se(),c=b(null),y=b(0),P=R(()=>[{name:"id",label:a("shift_ID"),field:"id",align:"left"},{name:"startTime",label:a("shift_start_time"),field:"startTime",align:"left"},{name:"endTime",label:a("shift_end_time"),field:"endTime",align:"left"},{name:"closedBy",label:a("shift_closed_by"),field:"closedBy",align:"left"},{name:"cashReceiver",label:a("cash_receiver"),field:"cashReceiver",align:"left"},{name:"startingBalance",label:a("starting_balance"),field:"startingBalance",align:"right"},{name:"totalCashReceipts",label:a("total_cash_receipts"),field:"totalCashReceipts",align:"right"},{name:"totalCashPayments",label:a("total_cash_payments"),field:"totalCashPayments",align:"right"},{name:"endBalance",label:a("end_shift_balance"),field:"endBalance",align:"right"},{name:"cashDifference",label:a("cash_difference"),field:"cashDifference",align:"right"},{name:"cashInSafe",label:a("cash_in_safe"),field:"cashInSafe",align:"right"},{name:"handToNextShift",label:a("hand_to_next_shift"),field:"handToNextShift",align:"right"},{name:"cashWithdrawals",label:a("cash_withdrawals"),field:"cashWithdrawals",align:"right"},{name:"note",label:a("note"),field:"note",align:"left"}]),T=b(Date.now()),r=U({page:1,limit:10,startDate:Number(d.formatDate(T.value,"X")),endDate:Number(d.formatDate(T.value,"X"))}),{data:p,isLoading:k}=oe(r,!0),V=()=>{c==null||c.value.show()},f=R({get:()=>({from:r.startDate?d.formatDate(new Date(r.startDate*1e3),N):"",to:r.endDate?d.formatDate(new Date(r.endDate*1e3),N):""}),set:_=>{y.value=0,_?(r.startDate=Number(d.formatDate(new Date(_.from),"X"))||Number(d.formatDate(new Date(_),"X")),r.endDate=Number(d.formatDate(new Date(_.to),"X"))||Number(d.formatDate(new Date(_),"X"))):r.startDate=r.endDate=null,E()}}),E=()=>{r.page=1};return(_,u)=>{const j=L("pms-sections");return m(),v(j,null,{header:t(()=>[e("div",ie,[e("div",ne,i(o(a)("shift_handover_report")),1)]),e("div",re,[e("div",null,[l(Y,{placeholder:"Select date time",dense:"","stack-label":"",style:{width:"100%"},filled:"",class:"q-mr-md inline-block",mask:"date",onFocus:V},{control:t(()=>[o(f).from&&o(f).to?(m(),D("div",de,i(o(d).formatDate(o(f).from,o(B)))+" - "+i(o(d).formatDate(o(f).to,o(B))),1)):w("v-if",!0)]),prepend:t(()=>[l(M,{name:"event",class:"no-pointer-events"},{default:t(()=>[l(A,{ref_key:"qDateRef",ref:c,"transition-show":"scale","transition-hide":"scale"},{default:t(()=>[l(F,{modelValue:o(f),"onUpdate:modelValue":u[0]||(u[0]=g=>X(f)?f.value=g:null),range:""},null,8,["modelValue"])]),_:1},512)]),_:1})]),_:1})])])]),default:t(()=>{var g;return[e("div",ce,[l(G,{showing:o(k),label:"Please","label-class":"text-teal","label-style":"font-size:1.1em"},{default:t(()=>[e("div",fe,[l(W,{color:"negative",thickness:2,size:"2em"})])]),_:1},8,["showing"]),o(k)?w("v-if",!0):(m(),D("div",me,[o(p)?(m(),v(J,{key:0,rows:o(p).shiftHandoverList,columns:o(P),"table-colspan":9,"row-key":"index","no-data-label":"No data","virtual-scroll-item-size":48,"rows-per-page-options":[0],"hide-pagination":"","hide-bottom":""},{header:t(s=>[l(S,{props:s},{default:t(()=>[(m(!0),D(K,null,z(s.cols,Q=>(m(),v(Z,{key:Q.name,props:s},{default:t(()=>[x(i(Q.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:t(s=>[l(S,null,{default:t(()=>[l(n,{key:"id"},{default:t(()=>[e("div",_e,i(s.row.id),1)]),_:2},1024),l(n,{key:"startTime"},{default:t(()=>[e("div",he,i(o(I)(s.row.startTime,o(C))),1)]),_:2},1024),l(n,{key:"endTime"},{default:t(()=>[e("div",ue,i(s.row.endTime?o(I)(s.row.endTime,o(C)):""),1)]),_:2},1024),l(n,{key:"closedBy"},{default:t(()=>[e("div",ge,i(s.row.closedBy),1)]),_:2},1024),l(n,{key:"cashReceiver"},{default:t(()=>[e("div",ve,i(s.row.cashReceiver),1)]),_:2},1024),l(n,{key:"startingBalance"},{default:t(()=>[e("div",we,[e("span",null,i(s.row.startingBalance),1)])]),_:2},1024),l(n,{key:"totalCashReceipts"},{default:t(()=>[e("div",ye,[e("span",null,i(s.row.totalCashReceipts),1)])]),_:2},1024),l(n,{key:"totalCashPayments"},{default:t(()=>[e("div",pe,[e("span",null,i(s.row.totalCashPayments),1)])]),_:2},1024),l(n,{key:"endBalance"},{default:t(()=>[e("div",be,[e("span",null,i(s.row.endBalance),1)])]),_:2},1024),l(n,{key:"cashDifference"},{default:t(()=>[e("div",De,[e("span",null,i(s.row.cashDifference),1)])]),_:2},1024),l(n,{key:"cashInSafe"},{default:t(()=>[e("div",xe,[e("span",null,i(s.row.cashInSafe),1)])]),_:2},1024),l(n,{key:"handToNextShift"},{default:t(()=>[e("div",Te,[e("span",null,i(s.row.handToNextShift),1)])]),_:2},1024),l(n,{key:"cashWithdrawals"},{default:t(()=>[e("div",ke,[e("span",null,i(s.row.cashWithdrawals),1)])]),_:2},1024),l(n,{key:"note"},{default:t(()=>[e("div",Qe,[e("div",Re,[x(i(s.row.note)+" ",1),s.row.note?(m(),v($,{key:0},{default:t(()=>[x(i(s.row.note),1)]),_:2},1024)):w("v-if",!0)])])]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","columns"])):w("v-if",!0),e("div",Se,[l(ee,{modelValue:o(r).page,"onUpdate:modelValue":u[1]||(u[1]=s=>o(r).page=s),color:"negative",max:((g=o(p))==null?void 0:g.meta.lastPage)||1,"max-pages":5,"boundary-numbers":"","direction-links":"",push:""},null,8,["modelValue","max"])])]))])]}),_:1})}}});var Ge=H(Ne,[["__scopeId","data-v-34ec2dab"],["__file","D:/project_learn/goPMS/src/modules/report/shift-handover-report/view.vue"]]);export{Ge as default};
