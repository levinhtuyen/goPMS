var j=Object.defineProperty;var P=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var $=(t,o,n)=>o in t?j(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,V=(t,o)=>{for(var n in o||(o={}))z.call(o,n)&&$(t,n,o[n]);if(P)for(var n of P(o))K.call(o,n)&&$(t,n,o[n]);return t};import{av as X,_ as J,J as W,r as m,i as G,bx as H,bJ as Z,p as ee,a as te,K as ae,F as y,G as h,I as g,N as s,P as i,M as r,L as q,U as C,W as U,bo as oe,V as ne,aF as d,R as u,Q as se,O as re}from"./index.7efcbe86.js";import{Q as ie}from"./QInnerLoading.5fef3982.js";import{Q as le,a as F,c,b as ue}from"./QTable.4cc8e1c9.js";import{Q as ce}from"./QPagination.a48c1bef.js";import{F as de}from"./filter.94c23db9.js";import{b as me,u as ye,d as Y}from"./axiosClient.a0ee23b9.js";import{Q as fe}from"./queryKeys.832af9fa.js";import{d as f}from"./date.2d51ed98.js";import{u as pe}from"./useI18n.6b7b36de.js";import{a as ve}from"./useFormat.349e799c.js";import"./QList.e5651779.js";import"./QSelect.8edab530.js";import"./QMenu.b19dfcca.js";import"./position-engine.4a23d733.js";import"./selection.6afffe69.js";import"./QItemLabel.938a9258.js";import"./rtl.4b414a6d.js";import"./QDate.804040fd.js";import"./use-cache.b0833c75.js";import"./QPopupProxy.9996c4ad.js";import"./useCategoryServiceQuery.9c0b8426.js";const _e=f.formatDate(new Date,"DD/MM/YYYY"),w=(t=_e)=>{const[o,n,l]=t.split("/");return`${l}/${n}/${o}`},ge=async t=>{var n,l;const{data:o}=await me.get(`/inventory/stock/getStockInventory?page=${(l=(n=t.page)==null?void 0:n.value)==null?void 0:l.currentPage}&categorySn=${t.categorySn.value}&limit=${t.limit}&startTime=${t.startTime.value?Number(f.formatDate(w(t.startTime.value),"X")):Number(f.formatDate(w(t.startWeek.value),"X"))}&endTime=${Number(f.formatDate(w(t.endTime.value),"X"))}`);return o.data},ke=t=>X([fe.STOCK_INVENTORIES,{params:t}],()=>ge(t));const be={lass:"full-width","full-height":"",class:"q-mt-md row justify-center"},he={key:0},we={class:"limit-text"},xe={class:"row justify-end q-mt-md"},Qe=W({setup(t){const o=f.formatDate,{hasPermission:n}=ye(),{t:l}=pe();let p=m({currentPage:1,lastPage:1});const E=G("emitter"),L=H(),x=Z(),R=m({key:"All receipts",id:0}),Q=m("");let v=m(o(Date.now(),Y)),_=m(o(Date.now(),Y));const{data:k,isLoading:b,refetch:A}=ke({startTime:v,endTime:_,categorySn:Q,page:p,limit:10});x.replace({path:"/settings/stock/inventory",query:{startTime:v.value,endTime:_.value}}),ee(()=>{E.on("closeDetailInventory",async()=>{A.value()})});const B=a=>{v.value=a.startTime,_.value=a.endTime,R.value=a.valuereceipts,Q.value=a.categorySn,x.replace({path:"/settings/stock/inventory",query:{startTime:v.value,endTime:_.value}})},M=te(()=>[{name:"no",label:l("no"),field:a=>a.sn},{name:"products",label:l("product",99),field:a=>a.productName},{name:"unit",label:l("unit"),field:a=>a.productUnitName},{name:"startInventory",label:l("start_inventory"),field:a=>a.startInventory},{name:"importQuantity",label:l("import_quantity"),field:a=>a.importQuantity},{name:"exportQuantity",label:l("export_quantity"),field:a=>a.exportQuantity},{name:"lastInventory",label:l("last_inventory"),field:a=>a.lastInventory},{name:"detail",label:"",field:()=>""}]);return(a,T)=>{var I,N,D;const O=ae("router-view");return y(),h(U,null,[g("div",null,[s(de,{"booking-no-field":!1,"is-category":!0,"is-add":!1,onChangeSuccess:B}),s(ie,{showing:i(b),label:"Please","label-class":"text-teal","label-style":"font-size:1.1em"},{default:r(()=>[g("div",be,[s(oe,{color:"negative",thickness:2,size:"2em"})])]),_:1},8,["showing"]),i(b)?C("v-if",!0):(y(),h("div",he,[(I=i(k))!=null&&I.stockInventoryList?(y(),q(le,{key:0,loading:i(b),columns:i(M),rows:(N=i(k))==null?void 0:N.stockInventoryList,"rows-per-page-options":[0],"hide-pagination":"","hide-bottom":"","no-data-label":"No data"},{header:r(e=>[s(F,null,{default:r(()=>[(y(!0),h(U,null,ne(e.cols,S=>(y(),q(ue,{key:S.name,props:e,class:"th"},{default:r(()=>[d(u(S.label),1)]),_:2},1032,["props"]))),128))]),_:2},1024)]),body:r(e=>[s(F,{props:e},{default:r(()=>[s(c,{key:"no",props:e,class:"td"},{default:r(()=>[d(u(i(ve)(i(p).currentPage,e.pageIndex)),1)]),_:2},1032,["props"]),s(c,{key:"products",props:e,class:"td"},{default:r(()=>[g("div",we,u(e.row.productName),1)]),_:2},1032,["props"]),s(c,{key:"unit",props:e,class:"td"},{default:r(()=>[d(u(e.row.productUnitName),1)]),_:2},1032,["props"]),s(c,{key:"startInventory",props:e,class:"td"},{default:r(()=>[d(u(e.row.startInventory),1)]),_:2},1032,["props"]),s(c,{key:"importQuantity",props:e,class:"td"},{default:r(()=>[d(u(e.row.importQuantity),1)]),_:2},1032,["props"]),s(c,{key:"exportQuantity",props:e,class:"td"},{default:r(()=>[d(u(e.row.exportQuantity),1)]),_:2},1032,["props"]),s(c,{key:"lastInventory",props:e,class:"td"},{default:r(()=>[d(u(e.row.lastInventory),1)]),_:2},1032,["props"]),s(c,{key:"detail",props:e,class:"td"},{default:r(()=>[s(se,{class:re(i(n)("import-export-detail")===!1?"hidden":""),icon:"visibility",to:{path:`/settings/stock/inventory/${e.row.sn}`,query:V({},i(L).query),state:{productName:e.row.productName,productUnitName:e.row.productUnitName}},dense:"",round:"",flat:""},null,8,["class","to"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["loading","columns","rows"])):C("v-if",!0),g("div",xe,[s(ce,{modelValue:i(p).currentPage,"onUpdate:modelValue":T[0]||(T[0]=e=>i(p).currentPage=e),color:"negative",max:((D=i(k))==null?void 0:D.meta.lastPage)||1,"max-pages":6,"direction-links":""},null,8,["modelValue","max"])])]))]),s(O)],64)}}});var Ke=J(Qe,[["__scopeId","data-v-e760cfec"],["__file","D:/gopms-web/src/modules/stock/inventory/pages/index.vue"]]);export{Ke as default};
