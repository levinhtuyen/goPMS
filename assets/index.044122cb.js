var G=Object.defineProperty;var B=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var O=(t,a,o)=>a in t?G(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,Q=(t,a)=>{for(var o in a||(a={}))J.call(a,o)&&O(t,o,a[o]);if(B)for(var o of B(a))H.call(a,o)&&O(t,o,a[o]);return t};import{av as Z,_ as ee,J as te,r as u,bx as ae,a as oe,w as I,K as le,F as d,G as k,I as _,N as s,P as i,M as n,L as y,U as N,W as U,bo as ie,V as se,aF as b,R as f,Q as $,O as W}from"./index.7efcbe86.js";import{Q as ne}from"./QInnerLoading.5fef3982.js";import{Q as re,a as z,c as m,b as de}from"./QTable.4cc8e1c9.js";import{Q as ce}from"./QPagination.a48c1bef.js";import{a as me,f as ue}from"./useFormat.349e799c.js";import{u as fe}from"./useI18n.6b7b36de.js";import{F as ge}from"./filter.94c23db9.js";import{b as _e,u as we,d as S,c as ke}from"./axiosClient.a0ee23b9.js";import{Q as ye}from"./queryKeys.832af9fa.js";import{d as g}from"./date.2d51ed98.js";import"./QList.e5651779.js";import"./QSelect.8edab530.js";import"./QMenu.b19dfcca.js";import"./position-engine.4a23d733.js";import"./selection.6afffe69.js";import"./QItemLabel.938a9258.js";import"./rtl.4b414a6d.js";import"./QDate.804040fd.js";import"./use-cache.b0833c75.js";import"./QPopupProxy.9996c4ad.js";import"./useCategoryServiceQuery.9c0b8426.js";const be=g.formatDate(new Date,"DD/MM/YYYY"),E=(t=be)=>{const[a,o,r]=t.split("/");return`${r}/${o}/${a}`},De=async t=>{var o,r;const{data:a}=await _e.get(`/inventory/stock/getExportStockList?page=${(r=(o=t.page)==null?void 0:o.value)==null?void 0:r.currentPage}&limit=${t.limit}&displayType=${t.displayType.value.id}&startTime=${t.startTime.value?Number(g.formatDate(E(t.startTime.value),"X")):Number(g.formatDate(E(t.startWeek.value),"X"))}&endTime=${Number(g.formatDate(E(t.endTime.value),"X"))}&keyword=${t.keyword.value?t.keyword.value:""}`);return a},Te=t=>Z([ye.IMPORT_STOCK,{params:t}],()=>De(t));const ve={lass:"full-width","full-height":"",class:"q-mt-md row justify-center"},pe={key:0},xe=["disable"],he={class:"limit-text"},Pe={class:"note"},Qe={class:"row justify-end q-mt-md"},Ie=te({setup(t){const a=g.formatDate,{hasPermission:o}=we(),{t:r}=fe(),D=u({key:"All receipts",id:0}),T=u();let c=u({currentPage:1,lastPage:1}),v=new Date,w=u(a(Date.now(),S)),F=u(a(Date.now(),S)),p=u(a(new Date(v.getFullYear(),v.getMonth(),v.getDate()-7),S));const M=ae(),{data:x,isLoading:h}=Te({page:c,limit:10,keyword:T,startWeek:p,displayType:D,startTime:w.value?w:p,endTime:F}),K=oe(()=>[{name:"no",align:"left",label:r("no"),field:l=>l.sn},{name:"exportDatetime",label:r("export_datetime"),field:l=>l.exportDate},{name:"exportReceiptID",align:"left",label:r("export_receipt_id"),field:l=>l.receiptId},{name:"bookingNo",align:"left",label:r("booking_no"),field:l=>l.bookingNo},{name:"total",label:r("total"),align:"right",field:l=>l.totalPrice},{name:"note",align:"left",label:r("note"),field:l=>l.note},{name:"isDeleted",align:"left",label:"",field:()=>""}]),X=l=>{T.value=l.keywordSearchBookingNo,p.value=l.startWeek,w.value=l.startTime,F.value=l.endTime,D.value=l.valuereceipts};return I(w,()=>{c.value.currentPage=1}),I(T,()=>{c.value.currentPage=1}),I(D,()=>{c.value.currentPage=1}),(l,V)=>{var C,R,Y,A,L,q;const j=le("router-view");return d(),k(U,null,[_("div",null,[s(ge,{"booking-no-field":!0,"is-category":!1,"is-add":!1,onChangeSuccess:X}),s(ne,{showing:i(h),label:"Please","label-class":"text-teal","label-style":"font-size:1.1em"},{default:n(()=>[_("div",ve,[s(ie,{color:"negative",thickness:2,size:"2em"})])]),_:1},8,["showing"]),i(h)?N("v-if",!0):(d(),k("div",pe,[(R=(C=i(x))==null?void 0:C.data)!=null&&R.exportStockList?(d(),y(re,{key:0,loading:i(h),columns:i(K),rows:(A=(Y=i(x))==null?void 0:Y.data)==null?void 0:A.exportStockList,"rows-per-page-options":[0],"no-data-label":"No data","hide-pagination":"","hide-bottom":""},{header:n(e=>[s(z,null,{default:n(()=>[(d(!0),k(U,null,se(e.cols,P=>(d(),y(de,{key:P.name,props:e,class:W(P.label==="Total"?"th-end":"th")},{default:n(()=>[b(f(P.label),1)]),_:2},1032,["props","class"]))),128))]),_:2},1024)]),body:n(e=>[s(z,{props:e},{default:n(()=>[s(m,{key:"no",props:e,class:"td","data-isDeleted":!!e.row.deleteTime},{default:n(()=>[b(f(i(me)(i(c).currentPage,e.pageIndex)),1)]),_:2},1032,["props","data-isDeleted"]),s(m,{key:"exportDatetime",props:e,class:"td","data-isDeleted":!!e.row.deleteTime},{default:n(()=>[b(f(i(g).formatDate(e.row.exportDate*1e3,i(ke))),1)]),_:2},1032,["props","data-isDeleted"]),s(m,{key:"exportReceiptID",props:e,class:"td","data-isDeleted":!!e.row.deleteTime},{default:n(()=>[i(o)("view-export-receipt-detail")?(d(),y($,{key:0,label:e.row.receiptId,to:{path:`/settings/stock/export/${e.row.sn}`,query:Q({},i(M).query)},flat:"",dense:"",disable:!!e.row.deleteTime,color:e.row.deleteTime?"":"orange-10"},null,8,["label","to","disable","color"])):(d(),k("span",{key:1,disable:!!e.row.deleteTime},f(e.row.receiptId),9,xe))]),_:2},1032,["props","data-isDeleted"]),s(m,{key:"bookingNo",props:e,class:"td","data-isDeleted":!!e.row.deleteTime},{default:n(()=>[s($,{label:e.row.bookingNo,to:{path:`/booking-details/${e.row.bookingSn}`},target:"_blank",flat:"",dense:"",disable:!!e.row.deleteTime,color:e.row.deleteTime?"":"orange-10"},null,8,["label","to","disable","color"])]),_:2},1032,["props","data-isDeleted"]),s(m,{key:"total",props:e,class:"td-end","data-isDeleted":!!e.row.deleteTime},{default:n(()=>[b(f(i(ue)(e.row.totalPrice))+" VND ",1)]),_:2},1032,["props","data-isDeleted"]),s(m,{key:"note",props:e,class:"td","data-isDeleted":!!e.row.deleteTime},{default:n(()=>[_("div",he,[_("p",Pe,f(e.row.note),1)])]),_:2},1032,["props","data-isDeleted"]),s(m,{key:"isDeleted",props:e,class:"action-detail","data-isDeleted":!!e.row.deleteTime},{default:n(()=>[e.row.deleteTime?(d(),y($,{key:0,class:W(i(o)("view-export-receipt-detail")===!1?"hidden":""),icon:"visibility",to:{path:`/settings/stock/export/${e.row.sn}`,query:Q({},i(M).query)},dense:"",round:"",flat:""},null,8,["class","to"])):N("v-if",!0)]),_:2},1032,["props","data-isDeleted"])]),_:2},1032,["props"])]),_:1},8,["loading","columns","rows"])):N("v-if",!0),_("div",Qe,[s(ce,{modelValue:i(c).currentPage,"onUpdate:modelValue":V[0]||(V[0]=e=>i(c).currentPage=e),color:"negative",max:((q=(L=i(x))==null?void 0:L.data)==null?void 0:q.meta.lastPage)||1,"max-pages":6,"direction-links":""},null,8,["modelValue","max"])])]))]),s(j)],64)}}});var Je=ee(Ie,[["__scopeId","data-v-21e4ad66"],["__file","D:/gopms-web/src/modules/stock/export/pages/index.vue"]]);export{Je as default};
