import{a as I,Q as L,b as Y,c as $}from"./QTable.87be80e4.js";import{_ as T,J as j,aB as M,a as z,F as l,L as R,P as o,aE as U,r as w,w as W,p as A,K,G as d,N as u,M as _,W as V,I as e,R as a,O as k,V as Q,aS as G,aT as J,aO as X,U as q}from"./index.4bd8ab7e.js";import{f as C}from"./useFormat.349e799c.js";import{u as Z}from"./useI18n.96209f4d.js";import{A as H}from"./vue3-apexcharts.common.2c595373.js";import{b as ee}from"./axiosClient.ad61c203.js";import{Q as te}from"./queryKeys.832af9fa.js";import{R as se}from"./ReservationDialog.da2aa601.js";import"./QList.550b5ccf.js";import"./QSelect.2521a28c.js";import"./QMenu.d60d439b.js";import"./position-engine.e365a736.js";import"./selection.cdf30163.js";import"./QItemLabel.0748896a.js";import"./rtl.4b414a6d.js";import"./QSpace.196a214e.js";import"./QBar.f39aa7c3.js";import"./QDate.20311372.js";import"./use-cache.b0833c75.js";import"./QPopupProxy.0d4ba934.js";import"./date.525ad423.js";import"./QTime.12b67e2f.js";import"./TouchPan.3d5b23e3.js";import"./touch.70a9dd44.js";import"./QForm.8a0c543d.js";import"./ClosePopup.34597da2.js";import"./useNotify.6f32b3a1.js";import"./use-quasar.fa06306f.js";import"./useCreateDate.f74931c4.js";import"./useValidate.94ac08ef.js";import"./useAppendixQuery.627eefb9.js";import"./useRoomTypeListQuery.6ae8a4aa.js";import"./useCalculateBookingAmountMutation.f3b5a254.js";const oe=j({props:{data:{type:Number,required:!1},chartColor:{type:String,required:!0}},setup(m){const i=m,f=M(i).data,n=M(i).chartColor,P=z(()=>[(f==null?void 0:f.value)||0]),b={chart:{type:"radialBar"},colors:[n.value],plotOptions:{radialBar:{offsetX:0,offsetY:-20,hollow:{margin:5,size:"50%",background:"transparent"},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:"Open-san",fontWeight:600,color:void 0,offsetY:-10},value:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(y){return y+"%"}}}}},labels:[""]};return(y,D)=>(l(),R(o(H),{type:"radialBar",options:b,series:o(P),width:"150",height:"150"},null,8,["series"]))}});var O=T(oe,[["__file","D:/project_learn/goPMS/src/modules/dashboard/components/PieChart.vue"]]);const ae=async()=>{const{data:m}=await ee.get("/dashboard/getDashboardData");return m.data},ne=()=>U([te.ME],()=>ae());const x=m=>(G("data-v-5d4627e1"),m=m(),J(),m),re={class:"q-mx-40"},le={class:"text-bold q-mb-md q-mt-none"},ie={class:"row",style:{"justify-content":"center"}},ce=x(()=>e("span",{class:"checked-in-box-border box-border float-left"},null,-1)),de={class:"q-py-md q-pl-md float-right full-width"},me={class:"inline-block float-left"},ue={class:"text-h4 text-bold"},_e={class:"text-h4 text-bold q-mr-sm",style:{color:"#3e3c7b"}},pe={class:"text-h5 text-bold"},he={class:"inline-block float-right"},fe={class:"text-bold text-subtitle1 text-center q-mb-none"},be={class:"chart"},ve={class:"col-md-6 col-xs-12 dashboard-box shadow-11"},xe=x(()=>e("span",{class:"revenue-box-border box-border float-left"},null,-1)),ge={class:"q-py-md q-pl-md float-right full-width"},we={class:"inline-block float-left"},ye={class:"text-h4 text-bold"},ke={class:"text-h4 text-bold q-mr-sm",style:{color:"#3e3c7b"}},qe=x(()=>e("span",{class:"text-h5 text-bold"},"VND",-1)),Ce={class:"inline-block float-right"},Pe={class:"text-bold text-subtitle1 text-center q-mb-none"},De={class:"chart"},Ve={class:"q-mx-40"},Re={class:"text-bold q-mb-md q-mt-none"},Ne={class:"flex q-mb-md"},Se={class:"flex q-mr-lg"},Be=x(()=>e("span",{class:"box default-price"},null,-1)),Ie={class:"text-bold q-ml-xs text-subtitle1"},Me={class:"flex"},Qe=x(()=>e("span",{class:"box suggested-price"},null,-1)),Oe={class:"text-bold q-ml-xs text-subtitle1"},Te={key:0,class:"row custom-cell full-width q-ma-sm"},je=["onClick"],Ee=["onClick"],Fe={key:0,class:"price suggested-price"},Le={key:1,class:"price suggested-price"},Ye={key:0,class:"col-md-4 col-sm-4"},$e=x(()=>e("p",{class:"percent"},null,-1)),ze={key:0},Ue={class:"material-icons"},We={key:1,class:"q-mb-none text-bold"},Ae=j({setup(m){const{t:i}=Z(),f=w(null),{data:n,isFetching:P}=ne(),b=w(!1),y={name:"name",label:"room_type_name",field:"name",align:"left",style:"width: 500px"},D=w([]),N=w([]);W(P,c=>{var t,s,h,g;const r=w([]);(t=n==null?void 0:n.value)!=null&&t.suggestedPrice[0]&&(r.value=Object.keys(n.value.suggestedPrice[0]).filter(v=>v!=="name"&&v!=="sn"));const p=((s=r==null?void 0:r.value)==null?void 0:s.map(v=>({name:v,label:v,field:v,align:"center",style:"min-width: 200px"})))||[];c===!1&&(D.value=[y,...p]),N.value=((h=n.value)==null?void 0:h.suggestedPrice)||[],S(Number((g=n==null?void 0:n.value)==null?void 0:g.now)*1e3||Date.now())});const E=c=>c===1?"arrow_drop_down":c===2?"arrow_drop_up":c===0?"remove":"";A(()=>{S(Date.now())});const S=c=>{const r=new Date(c),t=(60-r.getMinutes())*60*1e3-r.getSeconds();setInterval(()=>{location.reload()},t)},B=(c,r,p)=>{var s;const t=p.split("hours").join("");b.value=!0,(s=f.value)==null||s.setupReservationDialog(r,null,t,c)},F=()=>{b.value=!1};return(c,r)=>{const p=K("pms-sections");return l(),d(V,null,[u(p,null,{default:_(()=>{var t,s,h,g;return[e("div",re,[e("h4",le,a(o(i)("dashboard")),1),e("div",ie,[e("div",{class:k(["col-md-6 col-xs-12 dashboard-box shadow-11",c.$q.screen.gt.md?"q-mr-xl":"q-mb-md"])},[ce,e("div",de,[e("div",me,[e("p",ue,a(o(i)("dashboard_checked_in")),1),e("p",null,[e("span",_e,a((t=o(n))==null?void 0:t.totalCheckedInBooking),1),e("span",pe,a(o(i)("booking(s)")),1)])]),e("div",he,[e("p",fe,a(o(i)("occupancy")),1),e("div",be,[u(O,{data:(s=o(n))==null?void 0:s.occupancy,"chart-color":"#6445CE"},null,8,["data"])])])])],2),e("div",ve,[xe,e("div",ge,[e("div",we,[e("p",ye,a(o(i)("revenue")),1),e("p",null,[e("span",ke,a(o(C)((h=o(n))==null?void 0:h.revenue)),1),qe])]),e("div",Ce,[e("p",Pe,a(o(i)("efficiency")),1),e("div",De,[u(O,{data:(g=o(n))==null?void 0:g.efficiency,"chart-color":"#D84D9C"},null,8,["data"])])])])])])])]}),_:1}),u(p,null,{default:_(()=>[e("div",Ve,[e("h4",Re,a(o(i)("suggested_price")),1),e("div",Ne,[e("p",Se,[Be,e("span",Ie,a(o(i)("default_price")),1)]),e("p",Me,[Qe,e("span",Oe,a(o(i)("suggested_price")),1)])]),u(L,{class:"sticky-table",rows:N.value,columns:D.value,"row-key":"name","hide-pagination":"","hide-bottom":"","table-colspan":9,dense:"","rows-per-page-options":[0],separator:"cell"},{header:_(t=>[u(I,{props:t},{default:_(()=>[(l(!0),d(V,null,Q(t.cols,s=>(l(),R(Y,{key:s.name,props:t},{default:_(()=>[X(a(o(i)(s.label)),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:_(t=>[u(I,null,{default:_(()=>[(l(!0),d(V,null,Q(t.cols,s=>(l(),R($,{key:s.name,props:t,class:"q-px-none"},{default:_(()=>[typeof t.row[s.name]=="object"?(l(),d("div",Te,[e("div",{class:k(t.row[s.name].suggestedPrice?"col-md-8 col-sm-8":"col-md-12")},[t.row[s.name].defaultPrice?(l(),d("div",{key:0,class:"q-mb-sm cursor-pointer",onClick:h=>B(0,t.row.sn,s.name)},[e("p",{class:k(["price default-price",t.row[s.name].suggestedPrice?"":"q-mb-none"])},a(o(C)(t.row[s.name].defaultPrice))+" VND ",3)],8,je)):q("v-if",!0),typeof t.row[s.name].statusPercent!==null&&t.row[s.name].suggestedPrice?(l(),d("div",{key:1,class:"q-mb-none cursor-pointer",onClick:h=>B(1,t.row.sn,s.name)},[t.row[s.name].statusPercent!==0?(l(),d("span",Fe,a(o(C)(t.row[s.name].suggestedPrice))+" VND ",1)):(l(),d("span",Le,a(o(C)(t.row[s.name].defaultPrice))+" VND ",1))],8,Ee)):q("v-if",!0)],2),typeof t.row[s.name].statusPercent!==null&&t.row[s.name].suggestedPrice?(l(),d("div",Ye,[$e,e("p",{class:k(["q-mb-none q-ml-xs percent flex",t.row[s.name].statusPercent===1?"text-red":"text-blue"])},[t.row[s.name].percent?(l(),d("span",ze,a(t.row[s.name].percent)+"% ",1)):q("v-if",!0),e("span",Ue,a(E(t.row[s.name].statusPercent)),1)],2)])):q("v-if",!0)])):(l(),d("p",We,a(t.row[s.name]),1))]),_:2},1032,["props"]))),128))]),_:2},1024)]),_:1},8,["rows","columns"])])]),_:1}),u(se,{ref_key:"reservationDialogRef",ref:f,modelValue:b.value,"onUpdate:modelValue":r[0]||(r[0]=t=>b.value=t),onCreateSuccess:r[1]||(r[1]=t=>F())},null,8,["modelValue"])],64)}}});var Dt=T(Ae,[["__scopeId","data-v-5d4627e1"],["__file","D:/project_learn/goPMS/src/modules/dashboard/view.vue"]]);export{Dt as default};
