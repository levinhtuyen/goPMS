var ie=Object.defineProperty,ne=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var Q=(l,n,o)=>n in l?ie(l,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[n]=o,b=(l,n)=>{for(var o in n||(n={}))ce.call(n,o)&&Q(l,o,n[o]);if(E)for(var o of E(n))se.call(n,o)&&Q(l,o,n[o]);return l},M=(l,n)=>ne(l,ue(n));import{c as I,w as ve,af as he,p as fe,o as U,ao as de,ap as be,aq as ze,ar as me,g as X,d as Se,r as v,f as ge,a as u,as as ye,at as pe,au as _e,b as d,E as Te,q as B,x as w,av as $,aw as F}from"./index.4bd8ab7e.js";import{Q as R}from"./QResizeObserver.cca26867.js";import{T as V}from"./TouchPan.3d5b23e3.js";const{passive:k}=be,Pe=["both","horizontal","vertical"];var qe=I({name:"QScrollObserver",props:{axis:{type:String,validator:l=>Pe.includes(l),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(l,{emit:n}){const o={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let c=null,s,z;ve(()=>l.scrollTarget,()=>{g(),e()});function i(){c!==null&&c();const m=Math.max(0,ze(s)),f=me(s),h={top:m-o.position.top,left:f-o.position.left};if(l.axis==="vertical"&&h.top===0||l.axis==="horizontal"&&h.left===0)return;const _=Math.abs(h.top)>=Math.abs(h.left)?h.top<0?"up":"down":h.left<0?"left":"right";o.position={top:m,left:f},o.directionChanged=o.direction!==_,o.delta=h,o.directionChanged===!0&&(o.direction=_,o.inflectionPoint=o.position),n("scroll",b({},o))}function e(){s=he(z,l.scrollTarget),s.addEventListener("scroll",y,k),y(!0)}function g(){s!==void 0&&(s.removeEventListener("scroll",y,k),s=void 0)}function y(m){if(m===!0||l.debounce===0||l.debounce==="0")i();else if(c===null){const[f,h]=l.debounce?[setTimeout(i,l.debounce),clearTimeout]:[requestAnimationFrame(i),cancelAnimationFrame];c=()=>{h(f),c=null}}}const p=X();return fe(()=>{z=p.proxy.$el.parentNode,e()}),U(()=>{c!==null&&c(),g()}),Object.assign(p.proxy,{trigger:y,getPosition:()=>o}),de}});const L=["vertical","horizontal"],C={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},N={prevent:!0,mouse:!0,mouseAllDir:!0};var Ae=I({name:"QScrollArea",props:M(b({},Se),{thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function}),setup(l,{slots:n,emit:o}){const c=v(!1),s=v(!1),z=v(!1),i={vertical:v(0),horizontal:v(0)},e={vertical:{ref:v(null),position:v(0),size:v(0)},horizontal:{ref:v(null),position:v(0),size:v(0)}},g=X(),y=ge(l,g.proxy.$q);let p,m;const f=v(null),h=u(()=>"q-scrollarea"+(y.value===!0?" q-scrollarea--dark":""));e.vertical.percentage=u(()=>{const t=e.vertical.size.value-i.vertical.value;if(t<=0)return 0;const a=w(e.vertical.position.value/t,0,1);return Math.round(a*1e4)/1e4}),e.vertical.thumbHidden=u(()=>(l.visible===null?z.value:l.visible)!==!0&&c.value===!1&&s.value===!1||e.vertical.size.value<=i.vertical.value+1),e.vertical.thumbStart=u(()=>e.vertical.percentage.value*(i.vertical.value-e.vertical.thumbSize.value)),e.vertical.thumbSize=u(()=>Math.round(w(i.vertical.value*i.vertical.value/e.vertical.size.value,50,i.vertical.value))),e.vertical.style=u(()=>M(b(b({},l.thumbStyle),l.verticalThumbStyle),{top:`${e.vertical.thumbStart.value}px`,height:`${e.vertical.thumbSize.value}px`})),e.vertical.thumbClass=u(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(e.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),e.vertical.barClass=u(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(e.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),e.horizontal.percentage=u(()=>{const t=e.horizontal.size.value-i.horizontal.value;if(t<=0)return 0;const a=w(e.horizontal.position.value/t,0,1);return Math.round(a*1e4)/1e4}),e.horizontal.thumbHidden=u(()=>(l.visible===null?z.value:l.visible)!==!0&&c.value===!1&&s.value===!1||e.horizontal.size.value<=i.horizontal.value+1),e.horizontal.thumbStart=u(()=>e.horizontal.percentage.value*(i.horizontal.value-e.horizontal.thumbSize.value)),e.horizontal.thumbSize=u(()=>Math.round(w(i.horizontal.value*i.horizontal.value/e.horizontal.size.value,50,i.horizontal.value))),e.horizontal.style=u(()=>M(b(b({},l.thumbStyle),l.horizontalThumbStyle),{left:`${e.horizontal.thumbStart.value}px`,width:`${e.horizontal.thumbSize.value}px`})),e.horizontal.thumbClass=u(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(e.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),e.horizontal.barClass=u(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(e.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const _=u(()=>e.vertical.thumbHidden.value===!0&&e.horizontal.thumbHidden.value===!0?l.contentStyle:l.contentActiveStyle),Y=[[V,t=>{j(t,"vertical")},void 0,b({vertical:!0},N)]],G=[[V,t=>{j(t,"horizontal")},void 0,b({horizontal:!0},N)]];function O(){const t={};return L.forEach(a=>{const r=e[a];t[a+"Position"]=r.position.value,t[a+"Percentage"]=r.percentage.value,t[a+"Size"]=r.size.value,t[a+"ContainerSize"]=i[a].value}),t}const A=ye(()=>{const t=O();t.ref=g.proxy,o("scroll",t)},0);function H(t,a,r){if(L.includes(t)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(t==="vertical"?F:$)(f.value,a,r)}function J({height:t,width:a}){let r=!1;i.vertical.value!==t&&(i.vertical.value=t,r=!0),i.horizontal.value!==a&&(i.horizontal.value=a,r=!0),r===!0&&T()}function K({position:t}){let a=!1;e.vertical.position.value!==t.top&&(e.vertical.position.value=t.top,a=!0),e.horizontal.position.value!==t.left&&(e.horizontal.position.value=t.left,a=!0),a===!0&&T()}function W({height:t,width:a}){e.horizontal.size.value!==a&&(e.horizontal.size.value=a,T()),e.vertical.size.value!==t&&(e.vertical.size.value=t,T())}function j(t,a){const r=e[a];if(t.isFirst===!0){if(r.thumbHidden.value===!0)return;m=r.position.value,s.value=!0}else if(s.value!==!0)return;t.isFinal===!0&&(s.value=!1);const S=C[a],q=i[a].value,ae=(r.size.value-q)/(q-r.thumbSize.value),oe=t.distance[S.dist],re=m+(t.direction===S.dir?1:-1)*oe*ae;D(re,a)}function x(t,a){const r=e[a];if(r.thumbHidden.value!==!0){const S=t[C[a].offset];if(S<r.thumbStart.value||S>r.thumbStart.value+r.thumbSize.value){const q=S-r.thumbSize.value/2;D(q/i[a].value*r.size.value,a)}r.ref.value!==null&&r.ref.value.dispatchEvent(new MouseEvent(t.type,t))}}function Z(t){x(t,"vertical")}function ee(t){x(t,"horizontal")}function T(){c.value===!0?clearTimeout(p):c.value=!0,p=setTimeout(()=>{c.value=!1},l.delay),l.onScroll!==void 0&&A()}function D(t,a){f.value[C[a].scroll]=t}function te(){z.value=!0}function le(){z.value=!1}Object.assign(g.proxy,{getScrollTarget:()=>f.value,getScroll:O,getScrollPosition:()=>({top:e.vertical.position.value,left:e.horizontal.position.value}),getScrollPercentage:()=>({top:e.vertical.percentage.value,left:e.horizontal.percentage.value}),setScrollPosition:H,setScrollPercentage(t,a,r){H(t,a*(e[t].size.value-i[t].value),r)}});let P=null;return pe(()=>{P={top:e.vertical.position.value,left:e.horizontal.position.value}}),_e(()=>{if(P===null)return;const t=f.value;t!==null&&($(t,P.left),F(t,P.top))}),U(A.cancel),()=>d("div",{class:h.value,onMouseenter:te,onMouseleave:le},[d("div",{ref:f,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:l.tabindex!==void 0?l.tabindex:void 0},[d("div",{class:"q-scrollarea__content absolute",style:_.value},Te(n.default,[d(R,{debounce:0,onResize:W})])),d(qe,{axis:"both",onScroll:K})]),d(R,{debounce:0,onResize:J}),d("div",{class:e.vertical.barClass.value,style:[l.barStyle,l.verticalBarStyle],"aria-hidden":"true",onMousedown:Z}),d("div",{class:e.horizontal.barClass.value,style:[l.barStyle,l.horizontalBarStyle],"aria-hidden":"true",onMousedown:ee}),B(d("div",{ref:e.vertical.ref,class:e.vertical.thumbClass.value,style:e.vertical.style.value,"aria-hidden":"true"}),Y),B(d("div",{ref:e.horizontal.ref,class:e.horizontal.thumbClass.value,style:e.horizontal.style.value,"aria-hidden":"true"}),G)])}});export{qe as Q,Ae as a};
