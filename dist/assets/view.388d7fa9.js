import{Q as S}from"./QDate.20311372.js";import{Q as x}from"./QPopupProxy.0d4ba934.js";import{aE as I,_ as F,r as y,C as E,a as R,K as D,F as d,L as Q,M as o,I as s,R as n,N as a,G as f,U as T,T as A,bq as O,aO as u}from"./index.4bd8ab7e.js";import{a as M}from"./QMenu.d60d439b.js";import{Q as V}from"./QInnerLoading.36fa411b.js";import{a as U,c as m,Q as p}from"./QTable.87be80e4.js";import{Q as P}from"./QPagination.952d6437.js";import{u as C}from"./useI18n.96209f4d.js";import{b as q,e as v,d as X,c as B}from"./axiosClient.ad61c203.js";import{Q as K}from"./queryKeys.832af9fa.js";import{a as L}from"./useFormat.349e799c.js";import{n as j}from"./useCreateDate.f74931c4.js";import{d as c}from"./date.525ad423.js";import"./use-cache.b0833c75.js";import"./position-engine.e365a736.js";import"./selection.cdf30163.js";import"./QList.550b5ccf.js";import"./QSelect.2521a28c.js";import"./QItemLabel.0748896a.js";import"./rtl.4b414a6d.js";const z=async({queryKey:l})=>{const[,i]=l;if((i==null?void 0:i.dateFrom)&&(i==null?void 0:i.dateTo)){const{data:r}=await q.get("/report/getChangeRoomReportList",{params:i});return r.data}},G=(l,i)=>{const r=[K.CHANGE_ROOM_REPORT,l];return I(r,z,{enabled:i,select:t=>t})};const Y={setup(){const{t:l}=C(),i=y(Date.now()),r=E({page:1,limit:10,dateFrom:Number(c.formatDate(i.value,"X")),dateTo:Number(c.formatDate(i.value,"X"))}),{data:t,isFetching:N}=G(r,!0),w=y(null),b=y(0),h=()=>{w==null||w.value.show()},g=R({get:()=>({from:r.dateFrom?c.formatDate(new Date(r.dateFrom*1e3),v):"",to:r.dateTo?c.formatDate(new Date(r.dateTo*1e3),v):""}),set:_=>{b.value=0,_?(r.dateFrom=Number(c.formatDate(new Date(_.from),"X"))||Number(c.formatDate(new Date(_),"X")),r.dateTo=Number(c.formatDate(new Date(_.to),"X"))||Number(c.formatDate(new Date(_),"X"))):r.dateFrom=r.dateTo=null,e()}}),k=R(()=>[{name:"no",label:l("no"),align:"left",field:""},{name:"bookingNo",label:l("booking_no"),align:"left",field:"bookingNo"},{name:"bookingStatusSn",align:"left",label:l("booking_status"),field:"bookingStatusSn"},{name:"guestName",align:"left",label:l("guest_name"),field:"guestName"},{name:"roomTypeName",align:"left",label:l("room_types"),field:"roomTypeName"},{name:"oldRoomName",align:"left",label:l("old_rooms"),field:"oldRoomName"},{name:"newRoomName",align:"left",label:l("new_rooms"),field:"newRoomName"},{name:"checkIn",align:"left",label:l("arrival_date_time"),field:"checkIn"},{name:"checkOut",align:"left",label:l("departure_date_time"),field:"checkOut"},{name:"reason",align:"left",label:l("reason"),field:"reason"},{name:"createTime",align:"left",label:l("changed_at_by"),field:"createTime"}]),e=()=>{r.page=1};return{t:l,columns:k,data:t,isFetching:N,formatIndexTable:L,dateRangeType:b,onOpenDatePopUp:h,qDateRef:w,dateRange:g,FORMAT_DATE_UI:X,FORMAT_DATE_TIME_UI:B,FORMAT_DATE_PICKER:v,newDateStamp:j,formValues:r,date:c}}},H={class:"row q-mb-md"},J={class:"text-h5 text-bold"},W={class:"row q-mb-md"},Z={key:0,class:"self-center full-width no-outline",tabindex:"0"},$={class:"relative-position"},ee={lass:"full-width","full-height":"",class:"q-mt-md row justify-center"},te={key:0},oe={key:0,class:"text-orange-11"},ae={key:1,class:"text-green-11"},ne={key:2,class:"text-grey-11"},le={key:3,class:"text-deep-orange-11"},ie={key:4,class:"text-amber-11"},re={key:5,class:"text-blue-11"},se={class:"slice-tooltip"},me=["data-title"],de={class:"q-mt-md row justify-end"};function ce(l,i,r,t,N,w){const b=D("router-link"),h=D("pms-sections");return d(),Q(h,null,{header:o(()=>[s("div",H,[s("div",J,n(t.t("change_room_report")),1)]),s("div",W,[s("div",null,[a(M,{placeholder:"Select date time",dense:"","stack-label":"",filled:"",onFocus:t.onOpenDatePopUp},{control:o(()=>[t.dateRange.from&&t.dateRange.to?(d(),f("div",Z,n(t.date.formatDate(String(t.dateRange.from),t.FORMAT_DATE_UI))+" - "+n(t.date.formatDate(String(t.dateRange.to),t.FORMAT_DATE_UI)),1)):T("v-if",!0)]),prepend:o(()=>[a(A,{name:"event",class:"no-pointer-events"},{default:o(()=>[a(x,{ref:"qDateRef","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[a(S,{modelValue:t.dateRange,"onUpdate:modelValue":i[0]||(i[0]=g=>t.dateRange=g),range:""},null,8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["onFocus"])])])]),default:o(()=>{var g,k;return[s("div",$,[a(V,{showing:t.isFetching,label:"Please","label-class":"text-teal","label-style":"font-size:1.1em"},{default:o(()=>[s("div",ee,[a(O,{color:"negative",thickness:2,size:"2em"})])]),_:1},8,["showing"]),t.isFetching?T("v-if",!0):(d(),f("div",te,[a(p,{"rows-per-page-options":[0],rows:(g=t.data)==null?void 0:g.changeRoomReportList,columns:t.columns,"hide-pagination":"","hide-bottom":"","row-key":"no"},{body:o(e=>[a(U,{props:e},{default:o(()=>[a(m,{key:"no",props:e},{default:o(()=>[u(n(t.formatIndexTable(t.formValues.page,e.rowIndex)),1)]),_:2},1032,["props"]),a(m,{key:"bookingNo",props:e},{default:o(()=>{var _;return[a(b,{style:{"text-decoration":"none"},class:"custom-link text-negative",to:{name:"BookingDetails",params:{sn:(_=e.row)==null?void 0:_.bookingSn}}},{default:o(()=>[u(n(e.row.bookingNo),1)]),_:2},1032,["to"])]}),_:2},1032,["props"]),a(m,{key:"bookingStatusSn",props:e},{default:o(()=>[e.row.bookingStatusSn===1?(d(),f("div",oe,n(e.row.bookingStatusName),1)):e.row.bookingStatusSn===2?(d(),f("div",ae,n(e.row.bookingStatusName),1)):e.row.bookingStatusSn===3?(d(),f("div",ne,n(e.row.bookingStatusName),1)):e.row.bookingStatusSn===4?(d(),f("div",le,n(e.row.bookingStatusName),1)):e.row.bookingStatusSn===5?(d(),f("div",ie,n(e.row.bookingStatusName),1)):e.row.bookingStatusSn===6?(d(),f("div",re,n(e.row.bookingStatusName),1)):T("v-if",!0)]),_:2},1032,["props"]),a(m,{key:"guestName",props:e},{default:o(()=>[u(n(e.row.guestName),1)]),_:2},1032,["props"]),a(m,{key:"roomTypeName",props:e},{default:o(()=>[u(n(e.row.roomTypeName),1)]),_:2},1032,["props"]),a(m,{key:"oldRoomName",props:e},{default:o(()=>[u(n(e.row.oldRoomName),1)]),_:2},1032,["props"]),a(m,{key:"newRoomName",props:e},{default:o(()=>[u(n(e.row.newRoomName),1)]),_:2},1032,["props"]),a(m,{key:"checkIn",props:e},{default:o(()=>[u(n(t.newDateStamp(e.row.checkIn,t.FORMAT_DATE_TIME_UI)),1)]),_:2},1032,["props"]),a(m,{key:"checkOut",props:e},{default:o(()=>[u(n(t.newDateStamp(e.row.checkOut,t.FORMAT_DATE_TIME_UI)),1)]),_:2},1032,["props"]),a(m,{key:"reason",props:e},{default:o(()=>[s("div",se,[s("div",{"data-title":e.row.reason},n(e.row.reason),9,me)])]),_:2},1032,["props"]),a(m,{key:"createTime",props:e},{default:o(()=>[s("div",null,n(t.newDateStamp(e.row.createTime,t.FORMAT_DATE_TIME_UI)),1),s("div",null,n(e.row.staffName),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),s("div",de,[a(P,{modelValue:t.formValues.page,"onUpdate:modelValue":i[1]||(i[1]=e=>t.formValues.page=e),color:"negative",max:((k=t.data)==null?void 0:k.meta.lastPage)||1,"max-pages":5,"boundary-numbers":"","direction-links":"",push:""},null,8,["modelValue","max"])])]))])]}),_:1})}var Ae=F(Y,[["render",ce],["__scopeId","data-v-1b91c5f1"],["__file","D:/project_learn/goPMS/src/modules/report/change-room-report/view.vue"]]);export{Ae as default};
