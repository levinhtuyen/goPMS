import{Q as S}from"./QSelect.2521a28c.js";import{Q as de}from"./QDate.20311372.js";import{Q as ue}from"./QPopupProxy.0d4ba934.js";import{_ as ce,J as pe,a as D,bH as O,r as c,w as me,aC as ve,F as _,G as h,I as V,P as o,N as p,aQ as b,U as T,L as j,M as I,R as z,T as _e,aI as ge,O as fe,Q as ye}from"./index.4bd8ab7e.js";import{a as ke}from"./QMenu.d60d439b.js";import{d as G}from"./date.525ad423.js";import{u as De}from"./useI18n.96209f4d.js";import{u as he,d as i}from"./axiosClient.ad61c203.js";import{u as be}from"./useCategoryServiceQuery.1a080013.js";const we={class:"q-pb-md"},Se={class:"row"},Ve={key:0,class:"col-md-3 col-sm-6 col-xs-12 q-pr-sm q-pb-sm"},Te={key:1,class:"col-md-3 col-sm-6 col-xs-12 q-pr-sm q-pb-sm"},Ie={class:"col-md-2 col-sm-6 col-xs-12 q-pr-sm q-pb-sm"},Fe={class:"col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pr-sm q-pb-sm"},qe={class:"self-center full-width no-outline",tabindex:"0"},xe={key:2,class:"col-lg-2 col-md-3 col-sm-6 col-xs-12 q-pr-sm q-pb-sm"},Ne={key:3,class:"col-lg-4 col-md-4 col-sm-6 col-xs-12 q-pb-sm"},Oe=pe({props:{bookingNoField:{type:Boolean,required:!0},isAdd:{type:Boolean,required:!0},isCategory:{type:Boolean,required:!0}},emits:["changeSuccess","addImportReceipt"],setup(H,{emit:M}){var Y,B,C,R,U,E,A,W;const F=H,J=D(()=>[{key:t("select_time_range"),id:0},{key:t("today"),id:1},{key:t("this_week"),id:2},{key:t("this_month"),id:3},{key:t("this_year"),id:4}]),L=D(()=>[{key:t("all_receipts"),id:0},{key:t("available_import_receipt"),id:1},{key:t("deleted_import_receipt"),id:2}]),X=D(()=>[{key:t("all_receipts"),id:0},{key:t("available_export_receipt"),id:1},{key:t("deleted_export_receipt"),id:2}]),{data:q}=be(),P=D(()=>{var s,l;const e=(l=(s=q==null?void 0:q.value)==null?void 0:s.pages[0])==null?void 0:l.map(({name:ne,sn:re})=>({label:ne,value:re}));return[{label:t("all_categories"),value:""},...e||[]]}),{hasPermission:K}=he(),Z=O(F,"isAdd"),x=O(F,"isCategory"),Q=O(F,"bookingNoField"),n=G.formatDate,{t}=De(),N=G.formatDate(new Date,i);let m=c({label:t("all_categories"),value:""}),r=c({key:t("all_receipts"),id:0}),v=c({key:t("today"),id:1});const $=c(null),w=c(null);let a=new Date,d=c(n(Date.now(),i)),u=c(n(Date.now(),i)),ee=c(n(new Date(a.getFullYear(),a.getMonth(),a.getDate()-7),i));const y=c(),g=c({keywordSearchBookingNo:(B=(Y=y.value)==null?void 0:Y.toString())!=null?B:"",option:v.value,startWeek:(R=(C=ee.value)==null?void 0:C.toString())!=null?R:N,startTime:(E=(U=d.value)==null?void 0:U.toString())!=null?E:N,endTime:(W=(A=u.value)==null?void 0:A.toString())!=null?W:N,valuereceipts:r.value,categorySn:m.value.value}),k=D({get:()=>({from:d.value,to:u.value}),set:e=>{typeof e=="object"?(d.value=e==null?void 0:e.from,u.value=e==null?void 0:e.to):(d.value=e,u.value=e),f()}}),te=()=>{w==null||w.value.show(),v.value={key:t("select_time_range"),id:0}},oe=e=>{e===1?(d.value=n(Date.now(),i),u.value=n(Date.now(),i)):e===2?le():e===3?ae():e===4&&se(),f()},le=()=>{const e=new Date;var s=new Date(e.setDate(e.getDate()-e.getDay()+1)),l=new Date(e.setDate(e.getDate()-e.getDay()+7));d.value=n(s,i),u.value=n(l,i)},ae=()=>{a.getDate()>1?(u.value=n(new Date(a.getFullYear(),a.getMonth()+1,0),i),a.setDate(1),d.value=n(new Date(a.getFullYear(),a.getMonth(),a.getDate()),i)):a.getDate()===1&&(u.value=n(new Date(a.getFullYear(),a.getMonth()+1,0),i),a.setDate(1),d.value=n(new Date(a.getFullYear(),a.getMonth()-1,a.getDate()),i))},se=()=>{d.value=n(new Date(a.getFullYear()-1,12,1),i),u.value=n(new Date(new Date().getFullYear(),11,31),i)},ie=()=>{M("addImportReceipt")};me(()=>ve.global.locale.value,()=>{P.value[0]={label:t("all_categories"),value:""},m.value={label:t("all_categories"),value:""},r.value={key:t("all_receipts"),id:0},v.value={key:t("today"),id:1}});const f=()=>{g.value.valuereceipts=r.value,g.value.startTime=d.value,g.value.endTime=u.value,g.value.keywordSearchBookingNo=y.value?y.value:"",x.value&&(g.value.categorySn=m.value.value),M("changeSuccess",g.value)};return(e,s)=>(_(),h("div",we,[V("div",Se,[o(x)?(_(),h("div",Ve,[p(S,{modelValue:o(m),"onUpdate:modelValue":[s[0]||(s[0]=l=>b(m)?m.value=l:m=l),f],name:"accepted_genres",options:o(P),filled:"",dense:"",class:"custom-input-readonly","option-value":"value","option-label":"label"},null,8,["modelValue","options"])])):T("v-if",!0),o(x)?T("v-if",!0):(_(),h("div",Te,[o(Q)?(_(),j(S,{key:0,modelValue:o(r),"onUpdate:modelValue":[s[1]||(s[1]=l=>b(r)?r.value=l:r=l),f],name:"accepted_genres",options:o(X),filled:"",dense:"","option-value":"id","option-label":"key"},null,8,["modelValue","options"])):(_(),j(S,{key:1,modelValue:o(r),"onUpdate:modelValue":[s[2]||(s[2]=l=>b(r)?r.value=l:r=l),f],name:"accepted_genres",options:o(L),filled:"",dense:"","option-value":"id","option-label":"key"},null,8,["modelValue","options"]))])),V("div",Ie,[p(S,{ref:"time",modelValue:o(v),"onUpdate:modelValue":[s[3]||(s[3]=l=>b(v)?v.value=l:v=l),oe],options:o(J),filled:"",dense:"","emit-value":"","input-debounce":"0",behavior:"menu","map-options":"","option-label":"key","option-value":"id"},null,8,["modelValue","options"])]),V("div",Fe,[p(ke,{placeholder:o(t)("select_date_time"),dense:"","stack-label":"",style:{width:"100%"},filled:"",class:"q-mr-md inline-block",mask:"date",onFocus:te},{control:I(()=>[V("div",qe,z(o(k).from)+" - "+z(o(k).to),1)]),prepend:I(()=>[p(_e,{name:"event",class:"no-pointer-events"},{default:I(()=>[p(ue,{ref_key:"qDateRef",ref:w,"transition-show":"scale","transition-hide":"scale"},{default:I(()=>[p(de,{modelValue:o(k),"onUpdate:modelValue":s[4]||(s[4]=l=>b(k)?k.value=l:null),mask:"DD/MM/YYYY",range:""},null,8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["placeholder"])]),o(Q)?(_(),h("div",xe,[p(o(ge),{ref_key:"bookingNoField",ref:$,modelValue:y.value,"onUpdate:modelValue":[s[5]||(s[5]=l=>y.value=l),f],placeholder:o(t)("search_by_booking_no"),filled:"",dense:"",debounce:"900"},null,8,["modelValue","placeholder"])])):T("v-if",!0),o(Z)?(_(),h("div",Ne,[p(ye,{outline:"",class:fe(["float-right",o(K)("add-edit-delete-import-receipt")===!1?"hidden":""]),color:"negative",label:o(t)("import_receipt"),style:{"text-transform":"capitalize"},icon:"add_circle",onClick:ie},null,8,["label","class"])])):T("v-if",!0)])]))}});var Ae=ce(Oe,[["__scopeId","data-v-07ffce87"],["__file","D:/project_learn/goPMS/src/modules/stock/components/filter.vue"]]);export{Ae as F};
