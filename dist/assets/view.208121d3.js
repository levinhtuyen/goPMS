import{aE as B,_ as Y,J,r as p,a as I,C as W,w as N,K as Z,F as d,L as k,M as l,aC as ee,I as i,R as c,P as a,N as n,T as L,aI as te,G as g,U as w,aQ as ae,bq as oe,W as le,V as ie,O as D,aO as y,aS as ne,aT as se}from"./index.4bd8ab7e.js";import{Q as ce}from"./QDate.20311372.js";import{Q as de}from"./QPopupProxy.0d4ba934.js";import{a as re}from"./QMenu.d60d439b.js";import{Q as E}from"./QSelect.2521a28c.js";import{Q as ue}from"./QInnerLoading.36fa411b.js";import{Q as me,a as P,c as S,b as _e}from"./QTable.87be80e4.js";import{Q as O}from"./QTooltip.a00a2acf.js";import{Q as ve}from"./QPagination.952d6437.js";import{d as r}from"./date.525ad423.js";import{b as j,e as R,d as U,c as fe}from"./axiosClient.ad61c203.js";import{Q as q}from"./queryKeys.832af9fa.js";import{a as ge}from"./useFormat.349e799c.js";import{u as be}from"./useI18n.96209f4d.js";import"./use-cache.b0833c75.js";import"./position-engine.e365a736.js";import"./selection.cdf30163.js";import"./QItemLabel.0748896a.js";import"./rtl.4b414a6d.js";import"./QList.550b5ccf.js";const we=async({queryKey:u})=>{const[,e]=u;if((e==null?void 0:e.dateFrom)&&(e==null?void 0:e.dateTo)){const{data:v}=await j.get("/report/getHotelActivityList",{params:e});return v.data}},ye=(u,e)=>{const v=[q.HOTEL_ACTIVITIES_LOG,u];return B(v,we,{enabled:e,select:x=>x})},he=async()=>{const{data:u}=await j.get("/appendix/getStaffList?limit=-1");return u.data},pe=()=>B([q.STAFF],()=>he());const ke=u=>(ne("data-v-5b3e43c6"),u=u(),se(),u),Se={class:"row q-mb-md"},Te={class:"text-h5 text-bold"},De={class:"row q-mb-md q-gutter-md"},xe={class:"col col-md-2 col-sm-6 col-xs-12"},Qe={class:"col col-md-3 col-sm-6 col-xs-12"},Ie={key:0,class:"self-center full-width no-outline",tabindex:"0"},Ve={class:"col col-md-2 col-sm-6 col-xs-12"},Ae={class:"relative-position"},Ce={lass:"full-width","full-height":"",class:"q-mt-md row justify-center"},Fe={key:0},Ne={class:"row items-left justify-left"},Le={class:"limit-text"},Ee=["onClick"],Pe=["onClick"],Oe=["onClick"],Re={class:"row items-left justify-left"},Ue={class:"limit-text"},Be={class:"text-left"},je=ke(()=>i("br",null,null,-1)),qe={class:"row justify-end q-mt-md"},$e=J({setup(u){const{t:e}=be(),v=p(null),x=p(0),$=I(()=>[{name:"index",label:e("no"),field:"index",align:"left"},{name:"name",label:e("activities"),field:"name",align:"left"},{name:"id",label:e("ID"),field:"id",align:"left"},{name:"description",label:e("description"),field:"description",align:"left"},{name:"actionAtBy",label:e("action_at_by"),field:"actionAtBy",align:"left"}]),V=p(Date.now()),o=W({page:1,limit:10,dateFrom:Number(r.formatDate(V.value,"X")),dateTo:Number(r.formatDate(V.value,"X")),accountSn:0,activitySn:0,id:""});let{data:T}=pe();const H=()=>{o.page=1},f=I({get:()=>({from:o.dateFrom?r.formatDate(new Date(o.dateFrom*1e3),R):"",to:o.dateTo?r.formatDate(new Date(o.dateTo*1e3),R):""}),set:s=>{x.value=0,s?(o.dateFrom=Number(r.formatDate(new Date(s.from),"X"))||Number(r.formatDate(new Date(s),"X")),o.dateTo=Number(r.formatDate(new Date(s.to),"X"))||Number(r.formatDate(new Date(s),"X"))):o.dateFrom=o.dateTo=null}}),M=I(()=>[{label:e("all_activities"),value:0},{label:e("configuration_create_new_pricing_plan"),value:1},{label:e("configuration_edit_pricing_plan"),value:2},{label:e("configuration_duplicate_pricing_plan"),value:3},{label:e("configuration_delete_pricing_plan"),value:4},{label:e("configuration_edit_policy"),value:5},{label:e("booking_make_a_reservation"),value:6},{label:e("booking_check_in"),value:7},{label:e("booking_change_stay_date"),value:8},{label:e("booking_change_room"),value:9},{label:e("booking_cancel"),value:10},{label:e("booking_check_out"),value:11},{label:e("booking_change_extra_fee"),value:12},{label:e("booking_change_deposit"),value:13},{label:e("booking_change_discount"),value:14},{label:e("booking_add_services"),value:15},{label:e("cash_transaction_ad_new_cash_receipt"),value:16},{label:e("cash_transaction_edit_cash_receipt"),value:17},{label:e("cash_transaction_delete_cash_receipt"),value:18},{label:e("cash_transaction_add_new_cash_payment"),value:19},{label:e("cash_transaction_edit_cash_payment"),value:20},{label:e("cash_transaction_delete_cash_payment"),value:21}]),X=s=>{if(!!s)return s},b=p();N(T,()=>{b.value=T==null?void 0:T.value,b.value[0].sn!==0&&b.value.unshift({fullName:e("all_accounts"),sn:0})});const A=p("");N(()=>ee.global.locale.value,s=>{A.value=s,z.value(),b.value[0].sn===0&&(b.value[0]={fullName:e("all_accounts"),sn:0})});let{data:Q,isLoading:C,refetch:z}=ye(o,!0);const F=()=>{o.page=1},K=()=>{v==null||v.value.show()};return(s,m)=>{const G=Z("pms-sections");return d(),k(G,null,{header:l(()=>[i("div",Se,[i("div",Te,c(a(e)("hotel_activities_log")),1)]),i("div",De,[i("div",xe,[n(te,{modelValue:a(o).id,"onUpdate:modelValue":m[0]||(m[0]=_=>a(o).id=_),filled:"",dense:"",class:"rounded-borders",debounce:"300",placeholder:a(e)("search_by_ID")},{prepend:l(()=>[n(L,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),i("div",Qe,[n(re,{placeholder:"Select date time",dense:"","stack-label":"",style:{width:"100%"},filled:"",class:"q-mr-md inline-block",mask:"date",onFocus:K},{control:l(()=>[a(f).from&&a(f).to?(d(),g("div",Ie,c(a(r).formatDate(a(f).from,a(U)))+" - "+c(a(r).formatDate(a(f).to,a(U))),1)):w("v-if",!0)]),prepend:l(()=>[n(L,{name:"event",class:"no-pointer-events"},{default:l(()=>[n(de,{ref_key:"qDateRef",ref:v,"transition-show":"scale","transition-hide":"scale"},{default:l(()=>[n(ce,{modelValue:a(f),"onUpdate:modelValue":m[1]||(m[1]=_=>ae(f)?f.value=_:null),range:"",onRangeEnd:H},null,8,["modelValue"])]),_:1},512)]),_:1})]),_:1})]),(d(),g("div",{key:A.value,class:"col col-md-2 col-sm-6 col-xs-12"},[n(E,{modelValue:a(o).accountSn,"onUpdate:modelValue":[m[2]||(m[2]=_=>a(o).accountSn=_),F],options:b.value,filled:"","map-options":"","emit-value":"",dense:"","option-value":"sn","option-label":"fullName"},null,8,["modelValue","options"])])),i("div",Ve,[n(E,{modelValue:a(o).activitySn,"onUpdate:modelValue":[m[3]||(m[3]=_=>a(o).activitySn=_),F],options:a(M),dense:"",filled:"","option-value":"value","option-label":"label","map-options":"","emit-value":""},null,8,["modelValue","options"])])])]),default:l(()=>{var _;return[i("div",Ae,[n(ue,{showing:a(C),label:"Please","label-class":"text-teal","label-style":"font-size:1.1em"},{default:l(()=>[i("div",Ce,[n(oe,{color:"negative",thickness:2,size:"2em"})])]),_:1},8,["showing"]),a(C)?w("v-if",!0):(d(),g("div",Fe,[a(Q)?(d(),k(me,{key:0,rows:a(Q).hotelActivityList,columns:a($),"table-colspan":9,"row-key":"index","no-data-label":"No data","virtual-scroll-item-size":48,"rows-per-page-options":[0],"hide-pagination":"","hide-bottom":""},{header:l(t=>[n(P,{props:t},{default:l(()=>[(d(!0),g(le,null,ie(t.cols,h=>(d(),k(_e,{key:h.name,props:t},{default:l(()=>[y(c(h.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(t=>[n(P,null,{default:l(()=>[n(S,{key:"index",props:t,class:D(t.row.deleteTime?"opacity-view":"")},{default:l(()=>[y(c(a(ge)(a(o).page,t.pageIndex)),1)]),_:2},1032,["props","class"]),n(S,{key:"name"},{default:l(()=>[i("div",Ne,[i("div",Le,[y(c(X(t.row.name))+" ",1),t.row.name?(d(),k(O,{key:0},{default:l(()=>[y(c(t.row.name),1)]),_:2},1024)):w("v-if",!0)])])]),_:2},1024),n(S,{key:"id"},{default:l(()=>[t.row.activitySn===6||t.row.activitySn===7||t.row.activitySn===8||t.row.activitySn===9||t.row.activitySn===10||t.row.activitySn===11||t.row.activitySn===12||t.row.activitySn===13||t.row.activitySn===14||t.row.activitySn===15?(d(),g("div",{key:0,class:D(["row items-left justify-left","doc-link"])},[i("div",{onClick:h=>s.$router.push({name:"BookingDetails",params:{sn:t.row.sn}})},c(t.row.id),9,Ee)])):t.row.activitySn===16||t.row.activitySn===17||t.row.activitySn===18?(d(),g("div",{key:1,class:D(["row items-left justify-left","doc-link"])},[i("div",{onClick:h=>s.$router.push({name:"CashTransactions",params:{sn:t.row.sn,activitiesSn:t.row.activitySn}})},c(t.row.id),9,Pe)])):t.row.activitySn===19||t.row.activitySn===20||t.row.activitySn===21?(d(),g("div",{key:2,class:D(["row items-left justify-left","doc-link"])},[i("div",{onClick:h=>s.$router.push({name:"CashTransactions",params:{sn:t.row.sn,activitiesSn:t.row.activitySn}})},c(t.row.id),9,Oe)])):w("v-if",!0)]),_:2},1024),n(S,{key:"description"},{default:l(()=>[i("div",Re,[i("div",Ue,[y(c(t.row.description)+" ",1),t.row.description?(d(),k(O,{key:0},{default:l(()=>[y(c(t.row.description),1)]),_:2},1024)):w("v-if",!0)])])]),_:2},1024),n(S,{key:"actionAtBy"},{default:l(()=>[i("div",Be,[i("span",null,c(a(r).formatDate(new Date(t.row.actionAt*1e3),a(fe))),1),je,i("span",null,c(t.row.actionBy),1)])]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","columns"])):w("v-if",!0),i("div",qe,[n(ve,{modelValue:a(o).page,"onUpdate:modelValue":m[4]||(m[4]=t=>a(o).page=t),color:"negative",max:((_=a(Q))==null?void 0:_.meta.lastPage)||1,"max-pages":5,"boundary-numbers":"","direction-links":"",push:""},null,8,["modelValue","max"])])]))])]}),_:1})}}});var rt=Y($e,[["__scopeId","data-v-5b3e43c6"],["__file","D:/project_learn/goPMS/src/modules/report/hotel-activities-log/view.vue"]]);export{rt as default};
